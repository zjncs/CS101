# æ¥å£è¯´æ˜æ–‡æ¡£ - å¤©æ´¥å¤§å­¦é£Ÿå ‚èœå“ç‚¹è¯„ç³»ç»Ÿ V1 (æœ¬åœ°è¿è¡Œç‰ˆ)

## 1. å¼•è¨€

æœ¬æ–‡æ¡£æ—¨åœ¨ä¸ºâ€œå¤©æ´¥å¤§å­¦é£Ÿå ‚èœå“ç‚¹è¯„ç³»ç»Ÿâ€çš„åç«¯ API æä¾›è¯¦ç»†çš„è¯´æ˜ã€‚API è®¾è®¡éµå¾ª RESTful åŸåˆ™ï¼Œä½¿ç”¨ JSON æ ¼å¼è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå¹¶é€šè¿‡ HTTP çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚ç»“æœã€‚

**åŸºæœ¬URL (æœ¬æœºè¿è¡Œ)**: `http://localhost:8080/api/v1` *(å¦‚æœæ‚¨çš„ Spring Boot é¡¹ç›®é…ç½®äº†ä¸åŒäº `/` çš„ä¸Šä¸‹æ–‡è·¯å¾„, ä¾‹å¦‚ `server.servlet.context-path=/tjufood`, åˆ™åŸºæœ¬URLåº”ç›¸åº”è°ƒæ•´ä¸º `http://localhost:8080/tjufood/api/v1`)*

**è®¤è¯æ–¹å¼**:

- å¯¹äºéœ€è¦è®¤è¯çš„æ¥å£ï¼Œè¯·æ±‚å¤´ä¸­éœ€åŒ…å« `Authorization` å­—æ®µï¼Œå€¼ä¸º `Bearer <JWT_TOKEN>`ã€‚
- éƒ¨åˆ†æ¥å£å…è®¸åŒ¿åè®¿é—®ï¼Œä¼šåœ¨æ¥å£è¯´æ˜ä¸­ç‰¹åˆ«æŒ‡å‡ºã€‚

**é€šç”¨å“åº”æ ¼å¼**:

```
{
  "code": 200, // ä¸šåŠ¡çŠ¶æ€ç ï¼Œ200 è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºé”™è¯¯
  "message": "æ“ä½œæˆåŠŸ", // æç¤ºä¿¡æ¯
  "data": {} // å®é™…è¿”å›çš„æ•°æ®ï¼Œå¯èƒ½æ˜¯å¯¹è±¡æˆ–æ•°ç»„
}
```

**é€šç”¨é”™è¯¯ç çº¦å®š (ç¤ºä¾‹)**:

- `400`: Bad Request (è¯·æ±‚å‚æ•°é”™è¯¯)
- `401`: Unauthorized (æœªè®¤è¯æˆ–è®¤è¯å¤±è´¥)
- `403`: Forbidden (æ— æƒé™è®¿é—®)
- `404`: Not Found (èµ„æºä¸å­˜åœ¨)
- `500`: Internal ServerError (æœåŠ¡å™¨å†…éƒ¨é”™è¯¯)
- `1001`: ç”¨æˆ·åå·²å­˜åœ¨
- `1002`: é‚®ç®±å·²æ³¨å†Œ
- ... (æ›´å¤šä¸šåŠ¡ç›¸å…³é”™è¯¯ç )

## 2. æ¨¡å—åˆ’åˆ†

API å°†æŒ‰ç…§ä¸»è¦ä¸šåŠ¡æ¨¡å—è¿›è¡Œåˆ’åˆ†ï¼š

- è®¤è¯æ¨¡å— (Authentication)
- ç”¨æˆ·æ¨¡å— (Users)
- æ ¡åŒºã€é£Ÿå ‚ã€çª—å£ã€èœå“æ¨¡å— (Campus, Canteens, Stalls, Dishes)
- ç‚¹è¯„ä¸è¯„è®ºæ¨¡å— (Reviews & Comments)
- åšå®¢æ¨¡å— (Blogs)
- äº’åŠ¨æ¨¡å— (Interactions - ç‚¹èµã€æ”¶è—ã€å…³æ³¨)
- åå°ç®¡ç†æ¨¡å— (Admin - å†…å®¹å®¡æ ¸ã€æ•°æ®ç®¡ç†ç­‰)
- è¿è¥ç®¡ç†æ¨¡å— (Boss - ç³»ç»Ÿé…ç½®ã€æƒé™ç®¡ç†ç­‰)
- æ¿€åŠ±æ¨¡å— (Engagement - ç§¯åˆ†ã€ç­¾åˆ°ã€ä¼˜æƒ åˆ¸ã€å‹‹ç« )
- AI åŠ©æ‰‹æ¨¡å— (AI Assistant)

## 3. æ¥å£è¯¦æƒ…

### 3.1 è®¤è¯æ¨¡å— (Authentication)

#### 3.1.1 ç”¨æˆ·æ³¨å†Œ

- **æè¿°**: åŒ¿åç”¨æˆ·é€šè¿‡é‚®ç®±æˆ–æ‰‹æœºå·æ³¨å†Œæ–°è´¦å·ã€‚

- **URL**: `POST /auth/register`

- **è¯·æ±‚å¤´**: `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "username": "newuser001", // å¿…å¡«ï¼Œç”¨æˆ·å
    "password": "Password123!", // å¿…å¡«ï¼Œå¯†ç  (å‰ç«¯åº”åŠ å¯†ä¼ è¾“ï¼Œåç«¯å†æ¬¡å“ˆå¸Œå­˜å‚¨)
    "email": "newuser001@example.com", // é€‰å¡«ï¼Œé‚®ç®±
    "phone": "13800138001", // é€‰å¡«ï¼Œæ‰‹æœºå·
    "nickname": "æ–°æ‰‹ç”¨æˆ·", // å¿…å¡«ï¼Œæ˜µç§°
    "verificationCode": "123456" // é€‰å¡«ï¼Œå¦‚æœå¼€å¯äº†é‚®ç®±æˆ–æ‰‹æœºéªŒè¯ç æ³¨å†Œ
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "æ³¨å†ŒæˆåŠŸ",
    "data": {
      "userId": 101,
      "username": "newuser001",
      "nickname": "æ–°æ‰‹ç”¨æˆ·",
      "role": 0 // é»˜è®¤ä¸ºæ™®é€šç”¨æˆ·
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: å‚æ•°æ ¡éªŒå¤±è´¥ (å¦‚ç”¨æˆ·åæ ¼å¼é”™è¯¯ã€å¯†ç å¤æ‚åº¦ä¸å¤Ÿç­‰)

    ```
    { "code": 400, "message": "ç”¨æˆ·åæ ¼å¼ä¸æ­£ç¡®" }
    ```

  - ä¸šåŠ¡é”™è¯¯ (å¦‚ç”¨æˆ·åå·²å­˜åœ¨):

    ```
    { "code": 1001, "message": "ç”¨æˆ·åå·²å­˜åœ¨" }
    ```

  - ä¸šåŠ¡é”™è¯¯ (å¦‚é‚®ç®±å·²æ³¨å†Œ):

    ```
    { "code": 1002, "message": "é‚®ç®±å·²è¢«æ³¨å†Œ" }
    ```

  - ä¸šåŠ¡é”™è¯¯ (å¦‚éªŒè¯ç é”™è¯¯/è¿‡æœŸ):

    ```
    { "code": 1003, "message": "éªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸ" }
    ```

#### 3.1.2 ç”¨æˆ·ç™»å½•

- **æè¿°**: ç”¨æˆ·é€šè¿‡è´¦å·å¯†ç æˆ–éªŒè¯ç ç™»å½•ã€‚

- **URL**: `POST /auth/login`

- **è¯·æ±‚å¤´**: `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body - è´¦å·å¯†ç ç™»å½•)**:

  ```
  {
    "principal": "user001@example.com", // å¿…å¡«ï¼Œç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·
    "credential": "Password123!", // å¿…å¡«ï¼Œå¯†ç æˆ–éªŒè¯ç 
    "loginType": "password" // å¿…å¡«, "password" æˆ– "code"
  }
  ```

- **è¯·æ±‚ä½“ (Request Body - éªŒè¯ç ç™»å½•)**:

  ```
  {
    "principal": "13800138000", // å¿…å¡«ï¼Œæ‰‹æœºå·æˆ–é‚®ç®±
    "credential": "654321", // å¿…å¡«ï¼ŒéªŒè¯ç 
    "loginType": "code" // å¿…å¡«, "password" æˆ– "code"
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "ç™»å½•æˆåŠŸ",
    "data": {
      "token": "your_jwt_token_here", // JWT Token
      "userId": 1,
      "username": "zhangsan",
      "nickname": "å¼ ä¸‰",
      "role": 0 // ç”¨æˆ·è§’è‰²
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: å‚æ•°é”™è¯¯ã€‚

  - `401 Unauthorized`: è´¦å·æˆ–å¯†ç é”™è¯¯ã€éªŒè¯ç é”™è¯¯ã€ç”¨æˆ·è¢«ç¦ç”¨ã€‚

    ```
    { "code": 401, "message": "è´¦å·æˆ–å¯†ç é”™è¯¯" }
    ```json
    { "code": 1004, "message": "ç”¨æˆ·å·²è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜" }
    ```

#### 3.1.3 è·å–éªŒè¯ç 

- **æè¿°**: ä¸ºæ³¨å†Œã€ç™»å½•æˆ–æ‰¾å›å¯†ç å‘é€éªŒè¯ç ã€‚

- **URL**: `POST /auth/verification-code`

- **è¯·æ±‚å¤´**: `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "principal": "target@example.com", // å¿…å¡«ï¼Œæ¥æ”¶éªŒè¯ç çš„é‚®ç®±æˆ–æ‰‹æœºå·
    "type": 0 // å¿…å¡«ï¼ŒéªŒè¯ç±»å‹ (0=æ³¨å†Œ, 1=ç™»å½•, 2=æ‰¾å›å¯†ç )ï¼Œä¸ `tb_verification.type` å¯¹åº”
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "éªŒè¯ç å·²å‘é€ï¼Œè¯·æ³¨æ„æŸ¥æ”¶"
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: é‚®ç®±/æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼Œæˆ–å‘é€è¿‡äºé¢‘ç¹ã€‚

  - ä¸šåŠ¡é”™è¯¯ (å¦‚é‚®ç®±/æ‰‹æœºå·æœªæ³¨å†Œ - é’ˆå¯¹æ‰¾å›å¯†ç å’ŒéªŒè¯ç ç™»å½•):

    ```
    { "code": 1005, "message": "è¯¥é‚®ç®±æœªæ³¨å†Œ" }
    ```

#### 3.1.4 é€€å‡ºç™»å½• (å¯é€‰)

- **æè¿°**: ç”¨æˆ·é€€å‡ºç™»å½•ï¼ŒæœåŠ¡ç«¯å¯é€‰æ‹©ä½¿ JWT å¤±æ•ˆ (å¦‚æœé‡‡ç”¨é»‘åå•æœºåˆ¶)ã€‚

- **URL**: `POST /auth/logout`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "é€€å‡ºæˆåŠŸ"
  }
  ```

### 3.2 ç”¨æˆ·æ¨¡å— (Users)

#### 3.2.1 è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

- **æè¿°**: è·å–å½“å‰å·²è®¤è¯ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚

- **URL**: `GET /users/me`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

- **æˆåŠŸå“åº” (200 OK)**: `tb_user` è¡¨ä¸­ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ (ä¸å«å¯†ç )ã€‚

  ```
  {
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
      "id": 1,
      "username": "zhangsan",
      "email": "zhangsan@tju.edu.cn",
      "phone": "13800138000",
      "nickname": "å¼ ä¸‰",
      "icon": "/path/to/avatar.jpg",
      "gender": 1,
      "birthday": "1990-01-01",
      "bio": "ç¾é£Ÿçˆ±å¥½è€…",
      "campus": "åŒ—æ´‹å›­æ ¡åŒº",
      "credits": 150,
      "level": 2,
      "role": 0,
      "create_time": "2023-01-15T10:30:00"
      // ... å…¶ä»–å­—æ®µ
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `401 Unauthorized`: æœªç™»å½•æˆ– Token å¤±æ•ˆã€‚

#### 3.2.2 ä¿®æ”¹å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

- **æè¿°**: ä¿®æ”¹å½“å‰å·²è®¤è¯ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ (æ˜µç§°ã€å¤´åƒã€ç®€ä»‹ç­‰)ã€‚

- **URL**: `PUT /users/me`

- **è¯·æ±‚å¤´**:

  - `Authorization: Bearer <JWT_TOKEN>`
  - `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**: å…è®¸ä¿®æ”¹çš„å­—æ®µï¼Œä¾‹å¦‚ï¼š

  ```
  {
    "nickname": "ç¾é£Ÿå®¶å¼ ä¸‰",
    "icon": "/new/path/to/avatar.jpg", // å¦‚æœæœ‰æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼Œè¿™é‡Œå¯èƒ½æ˜¯ä¸Šä¼ åçš„æ–‡ä»¶URL
    "gender": 1,
    "birthday": "1990-01-15",
    "bio": "çƒ­çˆ±æ¢ç´¢å¤©æ´¥å¤§å­¦çš„æ¯ä¸€é“ç¾é£Ÿã€‚",
    "campus": "å«æ´¥è·¯æ ¡åŒº"
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**: è¿”å›æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯ã€‚

  ```
  {
    "code": 200,
    "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
    "data": {
      // ... æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯ï¼Œç»“æ„åŒ 3.2.1
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: è¯·æ±‚å‚æ•°æ ¡éªŒå¤±è´¥ã€‚
  - `401 Unauthorized`: æœªç™»å½•æˆ– Token å¤±æ•ˆã€‚

#### 3.2.3 ä¿®æ”¹å¯†ç  (å¯é€‰)

- **æè¿°**: å½“å‰ç™»å½•ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å¯†ç ã€‚

- **URL**: `PUT /users/me/password`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "oldPassword": "OldPassword123!",
    "newPassword": "NewSecurePassword456!"
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  { "code": 200, "message": "å¯†ç ä¿®æ”¹æˆåŠŸ" }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: æ–°å¯†ç ä¸ç¬¦åˆå¤æ‚åº¦è¦æ±‚ã€‚
  - `401 Unauthorized`: åŸå¯†ç é”™è¯¯ã€‚

#### 3.2.4 è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯ (å…¬å¼€ä¿¡æ¯)

- **æè¿°**: æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„å…¬å¼€ä¿¡æ¯ (å¦‚æ˜µç§°ã€å¤´åƒã€å‘å¸ƒçš„å…¬å¼€åšå®¢/è¯„ä»·æ•°é‡ç­‰)ã€‚

- **URL**: `GET /users/{userId}`

  - `{userId}`: è¦æŸ¥çœ‹çš„ç”¨æˆ· IDã€‚

- **æƒé™**: å…è®¸åŒ¿åæˆ–å·²ç™»å½•ç”¨æˆ·è®¿é—®ã€‚

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
      "id": 2,
      "nickname": "æå››çˆ±ç¾é£Ÿ",
      "icon": "/avatars/lisi.jpg",
      "bio": "å¤©å¤§é£Ÿå ‚æ¢ç´¢è€…",
      "level": 3,
      "publicBlogCount": 15,
      "publicReviewCount": 25,
      "followerCount": 120, // ç²‰ä¸æ•°
      "followingCount": 50, // å…³æ³¨æ•°
      "isFollowing": true // (å¯é€‰ï¼Œå¦‚æœå½“å‰ç”¨æˆ·å·²ç™»å½•) å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†è¯¥ç”¨æˆ·
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨ã€‚

### 3.3 æ ¡åŒºã€é£Ÿå ‚ã€çª—å£ã€èœå“æ¨¡å—

#### 3.3.1 è·å–æ ¡åŒºåˆ—è¡¨

- **URL**: `GET /campuses`

- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚

- **æŸ¥è¯¢å‚æ•° (Query Parameters)**:

  - `sort`: (å¯é€‰) æ’åºå­—æ®µï¼Œå¦‚ `sort,asc` æˆ– `name,desc`ã€‚

- **æˆåŠŸå“åº” (200 OK)**: `tb_campus` è¡¨ä¿¡æ¯åˆ—è¡¨ã€‚

  ```
  {
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
      {
        "id": 1,
        "name": "åŒ—æ´‹å›­æ ¡åŒº",
        "address": "å¤©æ´¥å¸‚æ´¥å—åŒºé›…è§‚è·¯135å·",
        "x": 117.36,
        "y": 39.11,
        "sort": 1
      },
      // ... å…¶ä»–æ ¡åŒº
    ]
  }
  ```

#### 3.3.2 è·å–é£Ÿå ‚ç±»å‹åˆ—è¡¨

- **URL**: `GET /canteen-types`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_canteen_type` è¡¨ä¿¡æ¯åˆ—è¡¨ã€‚

#### 3.3.3 è·å–é£Ÿå ‚åˆ—è¡¨

- **URL**: `GET /canteens`

- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚

- **æŸ¥è¯¢å‚æ•° (Query Parameters)**:

  - `campusId`: (å¯é€‰) æŒ‰æ ¡åŒºIDç­›é€‰ã€‚
  - `typeId`: (å¯é€‰) æŒ‰é£Ÿå ‚ç±»å‹IDç­›é€‰ã€‚
  - `name`: (å¯é€‰) æŒ‰é£Ÿå ‚åç§°æ¨¡ç³Šæœç´¢ã€‚
  - `page`: (å¯é€‰) é¡µç ï¼Œé»˜è®¤ä¸º 1ã€‚
  - `size`: (å¯é€‰) æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º 10ã€‚
  - `sort`: (å¯é€‰) æ’åºå­—æ®µï¼Œå¦‚ `score,desc` æˆ– `name,asc`ã€‚

- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„é£Ÿå ‚åˆ—è¡¨ï¼ŒåŒ…å« `tb_canteen` çš„ä¿¡æ¯ã€‚

  ```
  {
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
      "items": [
        {
          "id": 1,
          "name": "ç¬¬ä¸€é£Ÿå ‚",
          "campusId": 1,
          "typeId": 1,
          "images": "/images/canteen1_1.jpg,/images/canteen1_2.jpg",
          "address": "åŒ—æ´‹å›­æ ¡åŒºè¥¿åŒº",
          "floor": "1-3å±‚",
          "open_hours": "6:30-9:00, 11:00-13:30, 17:00-19:30",
          "avg_price": 15,
          "introduction": "...",
          "score": 4.5,
          "taste_score": 4.6,
          "environment_score": 4.3,
          "service_score": 4.4,
          "liked": 1200,
          "comments": 350,
          "open_status": 1
          // ... æ›´å¤š tb_canteen å­—æ®µ
        }
        // ... å…¶ä»–é£Ÿå ‚
      ],
      "total": 25, // æ€»è®°å½•æ•°
      "page": 1,
      "size": 10
    }
  }
  ```

#### 3.3.4 è·å–å•ä¸ªé£Ÿå ‚è¯¦æƒ…

- **URL**: `GET /canteens/{canteenId}`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_canteen` å•æ¡è®°å½•ï¼Œå¯è€ƒè™‘åŒæ—¶è¿”å›è¯¥é£Ÿå ‚ä¸‹çš„çª—å£åˆ—è¡¨æ‘˜è¦æˆ–çƒ­é—¨èœå“ã€‚

#### 3.3.5 è·å–çª—å£ç±»å‹åˆ—è¡¨

- **URL**: `GET /stall-types`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_stall_type` è¡¨ä¿¡æ¯åˆ—è¡¨ã€‚

#### 3.3.6 è·å–çª—å£åˆ—è¡¨

- **URL**: `GET /stalls`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æŸ¥è¯¢å‚æ•°**:
  - `canteenId`: (å¿…å¡«ï¼Œå¦‚æœä¸æ˜¯é€šè¿‡ `/canteens/{canteenId}/stalls` è®¿é—®) æŒ‰é£Ÿå ‚IDç­›é€‰ã€‚
  - `typeId`: (å¯é€‰) æŒ‰çª—å£ç±»å‹IDç­›é€‰ã€‚
  - `name`: (å¯é€‰) æŒ‰çª—å£åç§°æ¨¡ç³Šæœç´¢ã€‚
  - `page`, `size`, `sort` (åŒä¸Š)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„çª—å£åˆ—è¡¨ï¼Œ`tb_stall` è¡¨ä¿¡æ¯ã€‚

#### 3.3.7 è·å–å•ä¸ªçª—å£è¯¦æƒ…

- **URL**: `GET /stalls/{stallId}`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_stall` å•æ¡è®°å½•ï¼Œå¯è€ƒè™‘åŒæ—¶è¿”å›è¯¥çª—å£ä¸‹çš„èœå“åˆ—è¡¨ã€‚

#### 3.3.8 è·å–èœå“åˆ—è¡¨

- **URL**: `GET /dishes`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æŸ¥è¯¢å‚æ•°**:
  - `stallId`: (å¯é€‰) æŒ‰çª—å£IDç­›é€‰ã€‚
  - `canteenId`: (å¯é€‰) æŒ‰é£Ÿå ‚IDç­›é€‰ (æŸ¥è¯¢è¯¥é£Ÿå ‚ä¸‹æ‰€æœ‰çª—å£çš„èœå“)ã€‚
  - `campusId`: (å¯é€‰) æŒ‰æ ¡åŒºIDç­›é€‰ã€‚
  - `category`: (å¯é€‰) æŒ‰èœå“åˆ†ç±»ç­›é€‰ã€‚
  - `name`: (å¯é€‰) æŒ‰èœå“åç§°æ¨¡ç³Šæœç´¢ã€‚
  - `isSpecial`: (å¯é€‰, boolean) æ˜¯å¦æ‹›ç‰Œèœã€‚
  - `isLimited`: (å¯é€‰, boolean) æ˜¯å¦é™é‡ã€‚
  - `minPrice`, `maxPrice`: (å¯é€‰) ä»·æ ¼åŒºé—´ã€‚
  - `page`, `size`, `sort` (å¦‚ `price,asc`, `score,desc`)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„èœå“åˆ—è¡¨ï¼Œ`tb_dish` è¡¨ä¿¡æ¯ã€‚

#### 3.3.9 è·å–å•ä¸ªèœå“è¯¦æƒ…

- **URL**: `GET /dishes/{dishId}`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—®ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_dish` å•æ¡è®°å½•ï¼Œå¯è€ƒè™‘åŒ…å«å…¶æ‰€å±çª—å£å’Œé£Ÿå ‚çš„ç®€è¦ä¿¡æ¯ï¼Œä»¥åŠæœ€æ–°çš„å‡ æ¡è¯„ä»·ã€‚

### 3.4 ç‚¹è¯„ä¸è¯„è®ºæ¨¡å— (Reviews & Comments)

#### 3.4.1 æäº¤è¯„ä»·

- **æè¿°**: ç”¨æˆ·å¯¹é£Ÿå ‚ã€çª—å£æˆ–èœå“æäº¤è¯„ä»·å’Œè¯„åˆ†ã€‚

- **URL**: `POST /reviews`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "content": "è¿™ä¸ªèœå“å‘³é“å¾ˆæ£’ï¼Œæ¨èï¼", // å¿…å¡«
    "images": "/uploads/review_img1.jpg,/uploads/review_img2.jpg", // å¯é€‰ï¼Œå›¾ç‰‡URLï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš” (å®é™…å¯èƒ½æ˜¯å…ˆä¸Šä¼ å›¾ç‰‡è·å–URL)
    "targetType": "dish", // å¿…å¡«, "canteen", "stall", æˆ– "dish"
    "targetId": 123, // å¿…å¡«, å¯¹åº”çš„é£Ÿå ‚/çª—å£/èœå“ID
    "overall_score": 5, // å¿…å¡«, 1-5
    "taste_score": 5, // å¯é€‰
    "environment_score": 4, // å¯é€‰ï¼Œè¯„ä»·é£Ÿå ‚/çª—å£æ—¶
    "service_score": 4, // å¯é€‰ï¼Œè¯„ä»·é£Ÿå ‚/çª—å£æ—¶
    "price_score": 5 // å¯é€‰
  }
  ```

- **æˆåŠŸå“åº” (201 Created)**: è¿”å›åˆ›å»ºçš„è¯„ä»·ä¿¡æ¯ (æ­¤æ—¶ status ä¸ºå¾…å®¡æ ¸)ã€‚

  ```
  {
    "code": 201,
    "message": "è¯„ä»·æäº¤æˆåŠŸï¼Œç­‰å¾…å®¡æ ¸",
    "data": {
      "id": 501,
      "userId": 1,
      "content": "è¿™ä¸ªèœå“å‘³é“å¾ˆæ£’ï¼Œæ¨èï¼",
      "targetType": "dish",
      "targetId": 123,
      "overall_score": 5,
      "status": 0, // å¾…å®¡æ ¸
      "create_time": "2024-05-01T14:00:00"
      // ... å…¶ä»–å­—æ®µ
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: å‚æ•°æ ¡éªŒå¤±è´¥ã€‚
  - `401 Unauthorized`: æœªç™»å½•ã€‚
  - `404 Not Found`: è¯„ä»·çš„ç›®æ ‡ (é£Ÿå ‚/çª—å£/èœå“) ä¸å­˜åœ¨ã€‚

#### 3.4.2 è·å–è¯„ä»·åˆ—è¡¨

- **æè¿°**: è·å–æŒ‡å®šå¯¹è±¡ (é£Ÿå ‚/çª—å£/èœå“) æˆ–ç”¨æˆ·çš„è¯„ä»·åˆ—è¡¨ã€‚
- **URL**:
  - `GET /reviews` (é€šç”¨æŸ¥è¯¢)
  - `GET /canteens/{canteenId}/reviews` (è·å–æŸé£Ÿå ‚çš„è¯„ä»·)
  - `GET /stalls/{stallId}/reviews` (è·å–æŸçª—å£çš„è¯„ä»·)
  - `GET /dishes/{dishId}/reviews` (è·å–æŸèœå“çš„è¯„ä»·)
  - `GET /users/{userId}/reviews` (è·å–æŸç”¨æˆ·å‘å¸ƒçš„è¯„ä»·)
- **æƒé™**: å…è®¸åŒ¿åè®¿é—® (ä»…æ˜¾ç¤ºå·²å®¡æ ¸é€šè¿‡çš„)ã€‚
- **æŸ¥è¯¢å‚æ•° (Query Parameters for `GET /reviews`)**:
  - `targetType`: (å¯é€‰) "canteen", "stall", "dish"ã€‚
  - `targetId`: (å¯é€‰) å¯¹åº”IDã€‚
  - `userId`: (å¯é€‰) å‘å¸ƒç”¨æˆ·IDã€‚
  - `status`: (å¯é€‰, ä»…ç®¡ç†å‘˜/Bosså¯è§ä¸åŒçŠ¶æ€) 0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡, 2=å·²æ‹’ç»ã€‚é»˜è®¤æŸ¥è¯¢å·²é€šè¿‡ã€‚
  - `page`, `size`, `sort`ã€‚
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„è¯„ä»·åˆ—è¡¨ (`tb_review` ä¿¡æ¯ï¼Œå¯åŒ…å«ç”¨æˆ·ä¿¡æ¯æ‘˜è¦)ã€‚

#### 3.4.3 è·å–å•æ¡è¯„ä»·è¯¦æƒ…

- **URL**: `GET /reviews/{reviewId}`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—® (è‹¥å·²é€šè¿‡å®¡æ ¸)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_review` å•æ¡è®°å½•ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯ã€è¯„è®ºåˆ—è¡¨ã€‚

#### 3.4.4 æäº¤è¯„è®º (é’ˆå¯¹è¯„ä»·æˆ–åšå®¢)

- **æè¿°**: ç”¨æˆ·å¯¹è¯„ä»·æˆ–åšå®¢å‘è¡¨è¯„è®ºï¼Œæˆ–å›å¤å…¶ä»–è¯„è®ºã€‚

- **URL**: `POST /comments`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "content": "åŒæ„æ¥¼ä¸»çš„çœ‹æ³•ï¼", // å¿…å¡«
    "targetType": "review", // å¿…å¡«, "review" æˆ– "blog"
    "targetId": 501, // å¿…å¡«, å¯¹åº”çš„è¯„ä»·IDæˆ–åšå®¢ID
    "parentId": null // å¯é€‰, å¦‚æœæ˜¯å›å¤æŸæ¡è¯„è®ºï¼Œåˆ™ä¸ºè¢«å›å¤è¯„è®ºçš„ID
  }
  ```

- **æˆåŠŸå“åº” (201 Created)**: è¿”å›åˆ›å»ºçš„è¯„è®ºä¿¡æ¯ (status ä¸ºå¾…å®¡æ ¸)ã€‚

  ```
  {
    "code": 201,
    "message": "è¯„è®ºæäº¤æˆåŠŸï¼Œç­‰å¾…å®¡æ ¸",
    "data": {
      "id": 801,
      "userId": 2,
      "content": "åŒæ„æ¥¼ä¸»çš„çœ‹æ³•ï¼",
      "targetType": "review",
      "targetId": 501,
      "status": 0,
      "create_time": "2024-05-01T14:30:00"
      // ...
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: å‚æ•°æ ¡éªŒå¤±è´¥ã€‚
  - `401 Unauthorized`: æœªç™»å½•ã€‚
  - `404 Not Found`: è¯„è®ºçš„ç›®æ ‡ (è¯„ä»·/åšå®¢) æˆ–çˆ¶è¯„è®ºä¸å­˜åœ¨ã€‚

#### 3.4.5 è·å–è¯„è®ºåˆ—è¡¨

- **æè¿°**: è·å–æŒ‡å®šè¯„ä»·æˆ–åšå®¢çš„è¯„è®ºåˆ—è¡¨ã€‚
- **URL**:
  - `GET /reviews/{reviewId}/comments`
  - `GET /blogs/{blogId}/comments`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—® (ä»…æ˜¾ç¤ºå·²å®¡æ ¸é€šè¿‡çš„)ã€‚
- **æŸ¥è¯¢å‚æ•°**: `page`, `size`, `sort` (å¦‚ `create_time,desc`)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„è¯„è®ºåˆ—è¡¨ (`tb_comment` ä¿¡æ¯ï¼Œå¯åŒ…å«ç”¨æˆ·ä¿¡æ¯æ‘˜è¦ï¼Œä»¥åŠå­è¯„è®ºçš„åµŒå¥—ç»“æ„æˆ–å¹³é“ºç»“æ„)ã€‚

### 3.5 åšå®¢æ¨¡å— (Blogs)

#### 3.5.1 å‘è¡¨åšå®¢

- **æè¿°**: ç”¨æˆ·å‘å¸ƒå›¾æ–‡åšå®¢/ç¬”è®°ã€‚

- **URL**: `POST /blogs`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "title": "æˆ‘æœ€çˆ±çš„åŒ—æ´‹å›­ç‚’é¥­ï¼", // å¯é€‰
    "content": "è¯¦ç»†æè¿°...", // å¿…å¡«
    "images": "/uploads/blog_img1.jpg", // å¯é€‰ï¼Œå›¾ç‰‡URL
    "canteenId": 1, // å¯é€‰ï¼Œå…³è”é£Ÿå ‚ID
    "stallId": 5, // å¯é€‰ï¼Œå…³è”çª—å£ID
    "dishIds": [12, 15], // å¯é€‰ï¼Œå…³è”çš„èœå“IDåˆ—è¡¨ tb_blog_dish
    "topicIds": [3, 7], // å¯é€‰ï¼Œå…³è”çš„è¯é¢˜IDåˆ—è¡¨ tb_blog_topic
    "tags": ["ç‚’é¥­", "åŒ—æ´‹å›­ç¾é£Ÿ"] // å¯é€‰ï¼Œæ ‡ç­¾åç§°åˆ—è¡¨ï¼Œåç«¯å¤„ç† tb_tag å’Œ tb_blog_tag
  }
  ```

- **æˆåŠŸå“åº” (201 Created)**: è¿”å›åˆ›å»ºçš„åšå®¢ä¿¡æ¯ (status é€šå¸¸ä¸ºå¾…å®¡æ ¸æˆ–ç›´æ¥å‘å¸ƒï¼Œæ ¹æ®ç³»ç»Ÿé…ç½®)ã€‚

  ```
  {
    "code": 201,
    "message": "åšå®¢å‘å¸ƒæˆåŠŸ", // æˆ– "åšå®¢å·²æäº¤å®¡æ ¸"
    "data": {
      "id": 201,
      "userId": 1,
      "title": "æˆ‘æœ€çˆ±çš„åŒ—æ´‹å›­ç‚’é¥­ï¼",
      "status": 0, // æˆ– 1
      // ...
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`, `401 Unauthorized`.

#### 3.5.2 è·å–åšå®¢åˆ—è¡¨

- **URL**: `GET /blogs`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—® (ä»…æ˜¾ç¤ºå·²å®¡æ ¸/å·²å‘å¸ƒçš„)ã€‚
- **æŸ¥è¯¢å‚æ•°**:
  - `userId`: (å¯é€‰) æŒ‰ç”¨æˆ·IDç­›é€‰ã€‚
  - `canteenId`, `stallId`, `dishId`: (å¯é€‰) æŒ‰å…³è”çš„é£Ÿå ‚/çª—å£/èœå“IDç­›é€‰ã€‚
  - `topicId`: (å¯é€‰) æŒ‰è¯é¢˜IDç­›é€‰ã€‚
  - `tag`: (å¯é€‰) æŒ‰æ ‡ç­¾åç§°ç­›é€‰ã€‚
  - `keyword`: (å¯é€‰) æœç´¢æ ‡é¢˜æˆ–å†…å®¹ã€‚
  - `isTop`: (å¯é€‰, boolean) æ˜¯å¦ç½®é¡¶ã€‚
  - `status`: (å¯é€‰, ä»…ç®¡ç†å‘˜/Boss) åšå®¢çŠ¶æ€ã€‚
  - `page`, `size`, `sort` (å¦‚ `create_time,desc`, `liked,desc`)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„åšå®¢åˆ—è¡¨ (`tb_blog` ä¿¡æ¯ï¼Œå«ä½œè€…æ‘˜è¦ã€å…³è”ä¿¡æ¯æ‘˜è¦)ã€‚

#### 3.5.3 è·å–å•ç¯‡åšå®¢è¯¦æƒ…

- **URL**: `GET /blogs/{blogId}`
- **æƒé™**: å…è®¸åŒ¿åè®¿é—® (è‹¥å·²å‘å¸ƒ)ã€‚
- **æˆåŠŸå“åº” (200 OK)**: `tb_blog` å•æ¡è®°å½•ï¼ŒåŒ…å«å®Œæ•´å†…å®¹ã€ä½œè€…ä¿¡æ¯ã€å…³è”çš„é£Ÿå ‚/çª—å£/èœå“/è¯é¢˜/æ ‡ç­¾ä¿¡æ¯ã€è¯„è®ºåˆ—è¡¨ã€‚

#### 3.5.4 ç¼–è¾‘è‡ªå·±çš„åšå®¢

- **URL**: `PUT /blogs/{blogId}`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`
- **è¯·æ±‚ä½“**: åŒ 3.5.1 å‘è¡¨åšå®¢ï¼Œä½†ä¸ºä¿®æ”¹æ“ä½œã€‚
- **æˆåŠŸå“åº” (200 OK)**: è¿”å›æ›´æ–°åçš„åšå®¢ä¿¡æ¯ã€‚
- **å¤±è´¥å“åº”**:
  - `401 Unauthorized`, `403 Forbidden` (ä¸æ˜¯åšä¸»), `404 Not Found`.

#### 3.5.5 åˆ é™¤è‡ªå·±çš„åšå®¢

- **URL**: `DELETE /blogs/{blogId}`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æˆåŠŸå“åº” (204 No Content)**:
- **å¤±è´¥å“åº”**:
  - `401 Unauthorized`, `403 Forbidden` (ä¸æ˜¯åšä¸»), `404 Not Found`.

### 3.6 äº’åŠ¨æ¨¡å— (Interactions)

#### 3.6.1 ç‚¹èµ/å–æ¶ˆç‚¹èµ

- **æè¿°**: å¯¹åšå®¢ã€è¯„ä»·æˆ–è¯„è®ºè¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµã€‚

- **URL**: `POST /likes`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "targetId": 101, // å¿…å¡«ï¼Œè¢«ç‚¹èµå¯¹è±¡çš„ID (åšå®¢ID/è¯„ä»·ID/è¯„è®ºID)
    "type": 1 // å¿…å¡«ï¼Œç‚¹èµå¯¹è±¡ç±»å‹ (1=åšå®¢, 2=è¯„ä»·, 3=è¯„è®º)ï¼Œä¸ `tb_like.type` å¯¹åº”
  }
  ```

  - **æ³¨æ„**: æ­¤æ¥å£é€šå¸¸è®¾è®¡ä¸ºåˆ‡æ¢è¡Œä¸ºã€‚å¦‚æœå·²ç‚¹èµåˆ™å–æ¶ˆï¼Œæœªç‚¹èµåˆ™ç‚¹èµã€‚åç«¯åˆ¤æ–­ `tb_like` è¡¨ä¸­æ˜¯å¦å­˜åœ¨è®°å½•ã€‚

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ", // æˆ– "ç‚¹èµæˆåŠŸ", "å–æ¶ˆç‚¹èµæˆåŠŸ"
    "data": {
      "liked": true, // å½“å‰çš„ç‚¹èµçŠ¶æ€
      "likeCount": 150 // æ›´æ–°åçš„ç‚¹èµæ€»æ•° (å¯é€‰ï¼Œå‰ç«¯ä¹Ÿå¯è‡ªè¡Œæ›´æ–°)
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`, `401 Unauthorized`, `404 Not Found` (ç›®æ ‡ä¸å­˜åœ¨).

#### 3.6.2 è·å–ç‚¹èµåˆ—è¡¨ (å¯é€‰ï¼Œå¦‚è°ç‚¹èµäº†æŸå†…å®¹)

- **URL**: `GET /likes`
- **æŸ¥è¯¢å‚æ•°**: `targetId`, `type`, `page`, `size`.
- **æˆåŠŸå“åº”**: ç‚¹èµç”¨æˆ·åˆ—è¡¨ã€‚

#### 3.6.3 æ”¶è—/å–æ¶ˆæ”¶è—

- **æè¿°**: æ”¶è—æˆ–å–æ¶ˆæ”¶è—é¡¹ç›®ï¼ˆåšå®¢ã€è¯„ä»·ã€é£Ÿå ‚ã€çª—å£ã€èœå“ï¼‰ã€‚

- **URL**: `POST /favorites`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "targetId": 202, // å¿…å¡«ï¼Œè¢«æ”¶è—å¯¹è±¡çš„ID
    "type": 5 // å¿…å¡«ï¼Œæ”¶è—å¯¹è±¡ç±»å‹ (1=åšå®¢, 2=è¯„ä»·, 3=é£Ÿå ‚, 4=çª—å£, 5=èœå“)ï¼Œä¸ `tb_favorite.type` å¯¹åº”
  }
  ```

  - **æ³¨æ„**: åŒæ ·è®¾è®¡ä¸ºåˆ‡æ¢è¡Œä¸ºã€‚

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
      "favorited": false // å½“å‰çš„æ”¶è—çŠ¶æ€
    }
  }
  ```

- **å¤±è´¥å“åº”**: åŒç‚¹èµã€‚

#### 3.6.4 è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨

- **URL**: `GET /favorites/me`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æŸ¥è¯¢å‚æ•°**:
  - `type`: (å¯é€‰) æŒ‰æ”¶è—ç±»å‹ç­›é€‰ã€‚
  - `page`, `size`, `sort`.
- **æˆåŠŸå“åº” (200 OK)**: åˆ†é¡µçš„æ”¶è—é¡¹ç›®åˆ—è¡¨ï¼ŒåŒ…å«é¡¹ç›®åŸºæœ¬ä¿¡æ¯ã€‚

#### 3.6.5 å…³æ³¨/å–å…³ç”¨æˆ·

- **æè¿°**: å…³æ³¨æˆ–å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·ã€‚

- **URL**: `POST /follows`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**:

  ```
  {
    "followUserId": 10 // å¿…å¡«ï¼Œè¢«å…³æ³¨ç”¨æˆ·çš„ID
  }
  ```

  - **æ³¨æ„**: åˆ‡æ¢è¡Œä¸ºã€‚

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
      "following": true // å½“å‰æ˜¯å¦å…³æ³¨äº†è¯¥ç”¨æˆ·
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`, `401 Unauthorized`, `404 Not Found` (ç›®æ ‡ç”¨æˆ·ä¸å­˜åœ¨).
  - ä¸šåŠ¡é”™è¯¯ (å¦‚ä¸èƒ½å…³æ³¨è‡ªå·±)ã€‚

#### 3.6.6 è·å–å…³æ³¨åˆ—è¡¨ (æˆ‘å…³æ³¨çš„äºº)

- **URL**: `GET /users/me/following`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æŸ¥è¯¢å‚æ•°**: `page`, `size`.
- **æˆåŠŸå“åº”**: åˆ†é¡µçš„ç”¨æˆ·åˆ—è¡¨ã€‚

#### 3.6.7 è·å–ç²‰ä¸åˆ—è¡¨ (å…³æ³¨æˆ‘çš„äºº)

- **URL**: `GET /users/me/followers`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æŸ¥è¯¢å‚æ•°**: `page`, `size`.
- **æˆåŠŸå“åº”**: åˆ†é¡µçš„ç”¨æˆ·åˆ—è¡¨ã€‚

#### 3.6.8 è·å–ç”¨æˆ·é—´çš„å…³æ³¨å…³ç³» (å¯é€‰)

- **URL**: `GET /follows/status?userId1={userId1}&userId2={userId2}`
- **æˆåŠŸå“åº”**: åŒ…å« `userId1` æ˜¯å¦å…³æ³¨ `userId2`ï¼Œä»¥åŠ `userId2` æ˜¯å¦å…³æ³¨ `userId1`ã€‚

### 3.7 åå°ç®¡ç†æ¨¡å— (Admin) - ä»…åˆ—ä¸¾éƒ¨åˆ†æ ¸å¿ƒ

**é€šç”¨å‰ç¼€**: `/admin` (æ‰€æœ‰ Admin æ¥å£éƒ½éœ€è¦ Admin è§’è‰²æƒé™) **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

#### 3.7.1 å†…å®¹å®¡æ ¸ (è¯„ä»·/è¯„è®º/åšå®¢)

- **æè¿°**: ç®¡ç†å‘˜è·å–å¾…å®¡æ ¸åˆ—è¡¨ï¼Œå¹¶è¿›è¡Œå®¡æ ¸æ“ä½œã€‚

- **è·å–å¾…å®¡æ ¸åˆ—è¡¨**:

  - `GET /admin/reviews/pending`
  - `GET /admin/comments/pending`
  - `GET /admin/blogs/pending`
  - **æŸ¥è¯¢å‚æ•°**: `page`, `size`.
  - **æˆåŠŸå“åº”**: å¯¹åº”ç±»å‹çš„å¾…å®¡æ ¸å†…å®¹åˆ—è¡¨ã€‚

- **å®¡æ ¸æ“ä½œ**:

  - `PUT /admin/reviews/{reviewId}/audit`

  - `PUT /admin/comments/{commentId}/audit`

  - `PUT /admin/blogs/{blogId}/audit`

  - **è¯·æ±‚ä½“**:

    ```
    {
      "status": 1, // 1=é€šè¿‡, 2=æ‹’ç»
      "auditNote": "å†…å®¹ä¸ç¬¦åˆè§„èŒƒ" // æ‹’ç»æ—¶å¯é€‰
    }
    ```

  - **æˆåŠŸå“åº” (200 OK)**: `{ "code": 200, "message": "å®¡æ ¸æ“ä½œæˆåŠŸ" }`

#### 3.7.2 ç®¡ç†åŸºç¡€æ•°æ® (é£Ÿå ‚/çª—å£/èœå“)

- **åˆ›å»º**:
  - `POST /admin/canteens` (è¯·æ±‚ä½“å‚ç…§ `tb_canteen` ç»“æ„)
  - `POST /admin/stalls`
  - `POST /admin/dishes`
- **ä¿®æ”¹**:
  - `PUT /admin/canteens/{canteenId}`
  - `PUT /admin/stalls/{stallId}`
  - `PUT /admin/dishes/{dishId}`
- **åˆ é™¤/ä¸‹æ¶ (é€»è¾‘åˆ é™¤)**:
  - `DELETE /admin/canteens/{canteenId}` (é€šå¸¸æ›´æ–° `status` å­—æ®µ)
  - `DELETE /admin/stalls/{stallId}`
  - `DELETE /admin/dishes/{dishId}`
- **æŸ¥è¯¢**: Admin å¯ä»¥è®¿é—®å…¬å¼€çš„æŸ¥è¯¢æ¥å£ï¼Œä½†å¯èƒ½æœ‰é¢å¤–æƒé™æŸ¥çœ‹éå…¬å¼€æ•°æ®æˆ–æ›´å¤šå­—æ®µã€‚

#### 3.7.3 ç”¨æˆ·å†…å®¹ç®¡ç† (éšè—/åˆ é™¤ç”¨æˆ·å‘å¸ƒçš„å†…å®¹)

- **URL**:

  - `PUT /admin/reviews/{reviewId}/status`
  - `PUT /admin/comments/{commentId}/status`
  - `PUT /admin/blogs/{blogId}/status`

- **è¯·æ±‚ä½“**:

  ```
  {
    "status": 1 // 0=æ­£å¸¸, 1=éšè— (å…·ä½“çŠ¶æ€å€¼æ ¹æ®éœ€æ±‚å®šä¹‰)
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**: `{ "code": 200, "message": "å†…å®¹çŠ¶æ€æ›´æ–°æˆåŠŸ" }`

#### 3.7.4 å…¬å‘Šç®¡ç†

- `POST /admin/notices` (åˆ›å»ºå…¬å‘Š)
- `PUT /admin/notices/{noticeId}` (ä¿®æ”¹å…¬å‘Š)
- `DELETE /admin/notices/{noticeId}` (åˆ é™¤æˆ–ä¸‹çº¿å…¬å‘Š)
- `GET /admin/notices` (è·å–å…¬å‘Šåˆ—è¡¨ï¼Œå¯å¸¦çŠ¶æ€ç­›é€‰)

#### 3.7.5 ä¸¾æŠ¥å¤„ç†

- `GET /admin/reports/pending` (è·å–å¾…å¤„ç†ä¸¾æŠ¥åˆ—è¡¨)
- `PUT /admin/reports/{reportId}/handle` (å¤„ç†ä¸¾æŠ¥)
  - **è¯·æ±‚ä½“**: `{ "status": 1, "handleNote": "å·²è­¦å‘Šç”¨æˆ·" }` (1=å·²å¤„ç†, 2=å·²é©³å›)

### 3.8 è¿è¥ç®¡ç†æ¨¡å— (Boss) - ä»…åˆ—ä¸¾éƒ¨åˆ†æ ¸å¿ƒ

**é€šç”¨å‰ç¼€**: `/boss` (æ‰€æœ‰ Boss æ¥å£éƒ½éœ€è¦ Boss è§’è‰²æƒé™) **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

#### 3.8.1 ç®¡ç†å‘˜è´¦å·ç®¡ç†

- `GET /boss/admins` (è·å–ç®¡ç†å‘˜åˆ—è¡¨)
- `POST /boss/admins` (ä»»å‘½ç®¡ç†å‘˜)
  - **è¯·æ±‚ä½“**: `{ "userId": 15, "name": "æ–°ç®¡ç†å‘˜æå››", "roleIds": [1, 2] }`
- `PUT /boss/admins/{adminId}` (ä¿®æ”¹ç®¡ç†å‘˜ä¿¡æ¯ï¼Œå¦‚è§’è‰²)
- `DELETE /boss/admins/{adminId}` (è§£é™¤ç®¡ç†å‘˜)

#### 3.8.2 è§’è‰²ä¸æƒé™ç®¡ç†

- `GET /boss/roles` (è§’è‰²åˆ—è¡¨)
- `POST /boss/roles` (åˆ›å»ºè§’è‰²ï¼Œè¯·æ±‚ä½“: `{ "name": "...", "description": "...", "permissionIds": [1, 5, 10] }`)
- `PUT /boss/roles/{roleId}` (ä¿®æ”¹è§’è‰²)
- `DELETE /boss/roles/{roleId}` (åˆ é™¤è§’è‰²)
- `GET /boss/permissions` (æƒé™åˆ—è¡¨)
- (åˆ›å»º/ä¿®æ”¹æƒé™é€šå¸¸ç”±ç³»ç»Ÿé¢„å®šä¹‰æˆ–é€šè¿‡æ•°æ®åº“è¿ç§»å®Œæˆ)

#### 3.8.3 ç³»ç»Ÿé…ç½®ç®¡ç†

- `GET /boss/configs` (è·å–æ‰€æœ‰é…ç½®é¡¹)
- `PUT /boss/configs/{configKey}` (ä¿®æ”¹å•ä¸ªé…ç½®é¡¹)
  - **è¯·æ±‚ä½“**: `{ "value": "new_value" }`
- `GET /boss/sensitive-words` (æ•æ„Ÿè¯åˆ—è¡¨)
- `POST /boss/sensitive-words` (æ·»åŠ æ•æ„Ÿè¯)
- `DELETE /boss/sensitive-words/{wordId}` (åˆ é™¤æ•æ„Ÿè¯)

#### 3.8.4 æŸ¥çœ‹ç»Ÿè®¡ä¸åˆ†ææ•°æ®

- `GET /boss/statistics/user-activity?period=daily&date=2024-05-01`
- `GET /boss/statistics/review-distribution?canteenId=1&period=monthly`
- (å…·ä½“æ¥å£æ ¹æ® `tb_statistics` çš„ `type` å’Œ `target_id` è®¾è®¡)

### 3.9 æ¿€åŠ±æ¨¡å— (Engagement)

#### 3.9.1 æ¯æ—¥ç­¾åˆ°

- **URL**: `POST /engagement/sign-in`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "ç­¾åˆ°æˆåŠŸï¼Œè·å¾—5ç§¯åˆ†ï¼",
    "data": {
      "todaySigned": true,
      "earnedCredits": 5,
      "totalCredits": 155
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - ä¸šåŠ¡é”™è¯¯: `{ "code": 2001, "message": "ä»Šæ—¥å·²ç­¾åˆ°" }`

#### 3.9.2 è·å–æˆ‘çš„ç§¯åˆ†è®°å½•

- **URL**: `GET /engagement/me/credit-records`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æŸ¥è¯¢å‚æ•°**: `page`, `size`.
- **æˆåŠŸå“åº”**: åˆ†é¡µçš„ `tb_credit_record` åˆ—è¡¨ã€‚

#### 3.9.3 è·å–å¯å…‘æ¢ä¼˜æƒ åˆ¸åˆ—è¡¨

- **URL**: `GET /engagement/vouchers/available`
- **æƒé™**: å·²ç™»å½•ç”¨æˆ·ã€‚
- **æŸ¥è¯¢å‚æ•°**: `page`, `size`, `sort` (å¦‚ `required_credits,asc`)ã€‚
- **æˆåŠŸå“åº”**: çŠ¶æ€ä¸ºè¿›è¡Œä¸­ (`status`=1) ä¸”åº“å­˜ (`stock`) > 0 çš„ `tb_voucher` åˆ—è¡¨ã€‚

#### 3.9.4 å…‘æ¢ä¼˜æƒ åˆ¸

- **URL**: `POST /engagement/vouchers/{voucherId}/redeem`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`

- **æˆåŠŸå“åº” (200 OK)**:

  ```
  {
    "code": 200,
    "message": "ä¼˜æƒ åˆ¸å…‘æ¢æˆåŠŸï¼",
    "data": { // è¿”å›ç”¨æˆ·ä¼˜æƒ åˆ¸ä¿¡æ¯ tb_user_voucher
      "userVoucherId": 301,
      "voucherId": 10,
      "status": 0 // æœªä½¿ç”¨
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `404 Not Found`: ä¼˜æƒ åˆ¸ä¸å­˜åœ¨æˆ–å·²ä¸‹çº¿ã€‚
  - ä¸šåŠ¡é”™è¯¯: `{ "code": 2002, "message": "ç§¯åˆ†ä¸è¶³" }`
  - ä¸šåŠ¡é”™è¯¯: `{ "code": 2003, "message": "ä¼˜æƒ åˆ¸å·²æŠ¢å…‰" }`

#### 3.9.5 è·å–æˆ‘çš„ä¼˜æƒ åˆ¸åˆ—è¡¨

- **URL**: `GET /engagement/me/vouchers`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æŸ¥è¯¢å‚æ•°**:
  - `status`: (å¯é€‰) 0=æœªä½¿ç”¨, 1=å·²ä½¿ç”¨, 2=å·²è¿‡æœŸã€‚
  - `page`, `size`.
- **æˆåŠŸå“åº”**: åˆ†é¡µçš„ `tb_user_voucher` åˆ—è¡¨ (å¯ JOIN `tb_voucher` è·å–è¯¦æƒ…)ã€‚

#### 3.9.6 è·å–æˆ‘çš„å‹‹ç« åˆ—è¡¨

- **URL**: `GET /engagement/me/medals`
- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`
- **æˆåŠŸå“åº”**: `tb_user_medal` åˆ—è¡¨ (å¯ JOIN `tb_medal` è·å–è¯¦æƒ…)ã€‚

### 3.10 AI åŠ©æ‰‹æ¨¡å— (AI Assistant)

#### 3.10.1 ä¸ AI å¯¹è¯

- **æè¿°**: ç”¨æˆ·é’ˆå¯¹ç‰¹å®šå†…å®¹ (å¦‚èœå“ã€è¯„ä»·) å‘ AI æé—®ã€‚

- **URL**: `POST /ai/chat`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: application/json`

- **è¯·æ±‚ä½“ (Request Body)**: (å‚è€ƒæ‚¨éœ€æ±‚æ–‡æ¡£ä¸­çš„ `ChatRequestDto`)

  ```
  {
    "userQuestion": "è¿™ä¸ªèœå“è¾£ä¸è¾£ï¼Ÿé€‚åˆå°æœ‹å‹åƒå—ï¼Ÿ",
    "contextType": "dish", // "dish", "review", etc.
    "contextId": 123 // å¯¹åº”èœå“æˆ–è¯„ä»·çš„ID
  }
  ```

- **æˆåŠŸå“åº” (200 OK)**: (å‚è€ƒæ‚¨éœ€æ±‚æ–‡æ¡£ä¸­çš„ `ChatResponseDto`)

  ```
  {
    "code": 200,
    "message": "AIåŠ©æ‰‹å›å¤æˆåŠŸ",
    "data": {
      "aiResponse": "æ ¹æ®èœå“æè¿°å’Œå¤§éƒ¨åˆ†ç”¨æˆ·è¯„ä»·ï¼Œè¿™é“ã€é±¼é¦™è‚‰ä¸ã€‘å¸¦æœ‰å¾®è¾£ï¼Œå¯èƒ½ä¸å¤ªé€‚åˆéå¸¸å°çš„å­©å­ã€‚å»ºè®®æ‚¨å¯ä»¥å°è¯•ã€XXXä¸è¾£èœå“ã€‘ã€‚"
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: å‚æ•°é”™è¯¯ã€‚

  - `404 Not Found`: ä¸Šä¸‹æ–‡å†…å®¹ (èœå“/è¯„ä»·) æœªæ‰¾åˆ°ã€‚

  - `500 Internal Server Error`: è°ƒç”¨ LLM API å¤±è´¥æˆ–åç«¯å¤„ç†é”™è¯¯ã€‚

    ```
    { "code": 500, "message": "æŠ±æ­‰ï¼ŒAIåŠ©æ‰‹æš‚æ—¶æ— æ³•å“åº”ã€‚" }
    ```

## 4. æ–‡ä»¶ä¸Šä¼ æ¥å£ (é€šç”¨)

- **æè¿°**: ä¸Šä¼ å›¾ç‰‡ç­‰æ–‡ä»¶ï¼Œè¿”å›æ–‡ä»¶ URLã€‚

- **URL**: `POST /files/upload`

- **è¯·æ±‚å¤´**: `Authorization: Bearer <JWT_TOKEN>`, `Content-Type: multipart/form-data`

- **è¯·æ±‚ä½“**: `file` (æ–‡ä»¶æœ¬èº«)

- **æˆåŠŸå“åº” (201 Created)**:

  ```
  {
    "code": 201,
    "message": "æ–‡ä»¶ä¸Šä¼ æˆåŠŸ",
    "data": {
      "fileId": 701, // tb_file.id
      "url": "/uploads/images/timestamp_random_filename.jpg", // æ³¨æ„ï¼šè¿™ä¸ªURLåº”è¯¥æ˜¯ç›¸å¯¹äºåŸºæœ¬URLçš„ï¼Œæˆ–è€…æ˜¯å®Œæ•´çš„å¯è®¿é—®URL
      "originalName": "ç¾é£Ÿç…§ç‰‡.jpg",
      "type": "image/jpeg",
      "size": 102400 // bytes
    }
  }
  ```

- **å¤±è´¥å“åº”**:

  - `400 Bad Request`: æ–‡ä»¶è¿‡å¤§ã€æ ¼å¼ä¸æ”¯æŒç­‰ã€‚
  - `401 Unauthorized`.

è¿™ä»½ API æ–‡æ¡£æ˜¯ä¸€ä¸ªèµ·ç‚¹ï¼Œæ‚¨éœ€è¦æ ¹æ®æ‚¨çš„å…·ä½“æŠ€æœ¯é€‰å‹ï¼ˆæ¯”å¦‚åˆ†é¡µå‚æ•°åã€æ’åºè¯­æ³•ç­‰ï¼‰å’Œè¿›ä¸€æ­¥çš„éœ€æ±‚ç»†åŒ–è¿›è¡Œè°ƒæ•´ã€‚å¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼ğŸ‰