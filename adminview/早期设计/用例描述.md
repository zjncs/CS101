# ⚙️ 天津大学美食社区平台 - 用例描述

## 1. 引言

本文档旨在详细描述“天津大学美食社区平台”系统的各项功能用例，明确系统参与者（Actor）与系统之间的交互，以及每个用例涉及的核心数据库操作，以实现《用户需求规格书》中定义的业务目标。

## 2. 系统参与者 (Actors)

- **Anonymous User (匿名用户)**: 未登录系统的访问者。
- **User (注册用户)**: 已登录系统的普通用户。
- **Admin (管理员)**: 负责内容审核和基础数据管理的后台用户。
- **Boss (平台管理者)**: 拥有最高系统管理权限的用户。
- **System (系统)**: 代表系统内部的自动化处理或后台逻辑。

## 3. 系统用例描述

### 3.1 账号与认证模块

| **Use Case ID**    | **UC-001**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 用户注册 (Register Account)                                  |
| **Actor(s)**       | Anonymous User                                               |
| **用例目标**       | 创建一个新的用户账号。                                       |
| **前置条件**       | 用户未登录系统。                                             |
| **后置条件**       | 成功：创建新用户记录 (`tb_user`)，状态正常，角色为普通用户。用户可选自动登录。<br />失败：账号未创建，提示错误信息。 |
| **主流程 (简述)**  | 1. Actor 访问注册页。<br />2. Actor 填写注册信息。<br />3. (可选) Actor 获取并输入验证码。<br />4. Actor 提交注册。<br />5. System 验证信息。<br />6. System 创建用户账号。<br />7. System 提示注册成功。 |
| **主要数据库操作** | - **查询 `tb_user`**: 检查用户名/邮箱/手机号是否已存在。<br />- (可选) **查询 `tb_verification`**: 验证验证码。<br />- **插入 `tb_user`**: 创建新用户记录，存储加密密码。<br />- (可选) **更新 `tb_verification`**: 标记验证码为已使用。 |
| **相关需求**       | A级 - 账号管理 - 用户注册                                    |

| **Use Case ID**    | **UC-002**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 用户登录 (Log In)                                            |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 验证用户身份并访问系统。                                     |
| **前置条件**       | 用户拥有有效的、未禁用的账号。用户未登录。                   |
| **后置条件**       | 成功：用户进入登录状态，可访问相应功能。<br />失败：用户保持未登录，提示错误。 |
| **主流程 (简述)**  | 1. Actor 访问登录页。<br />2. Actor 输入登录凭据。<br />3. Actor 提交登录请求。<br />4. System 根据登录方式验证凭据。<br />5. System 验证成功，记录登录状态，导航至相应页面。 |
| **主要数据库操作** | - **查询 `tb_user`**: 根据邮箱/手机号/用户名获取用户信息 (id, password hash, status, role)。<br />- (可选) **查询 `tb_verification`**: 验证登录验证码。<br />- (可选) **更新 `tb_user`**: 记录 `last_login_time`。 |
| **相关需求**       | A级 - 账号管理 - 用户登录；B级 - 用户交互优化 - 验证码登录   |

| **Use Case ID**    | **UC-003**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理个人资料 (Manage Profile)                                |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 查看和修改个人基本信息（昵称、头像、性别、生日、简介、校区）。 |
| **前置条件**       | User 已登录系统。                                            |
| **后置条件**       | 成功：`tb_user` 中对应用户的资料字段更新。<br />失败：用户信息未改变。 |
| **主流程 (简述)**  | 1. User 访问个人资料页。<br />2. System 显示当前用户信息。<br />3. User 修改信息并提交。<br />4. System 验证输入。<br />5. System 更新用户信息。<br />6. System 提示成功。 |
| **主要数据库操作** | - **查询 `tb_user`**: 获取当前用户信息。<br />- **更新 `tb_user`**: 修改 `nickname`, `icon`, `gender`, `birthday`, `bio`, `campus`, `update_time` 字段。 |
| **相关需求**       | A级 - 账号管理 (隐含)                                        |

| **Use Case ID**    | **UC-004**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理角色与权限 (Manage Roles & Permissions) - Boss 专属      |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 创建、修改、查看、删除系统角色和权限，并管理角色与权限的关联。 |
| **前置条件**       | Boss 已登录后台管理系统。                                    |
| **后置条件**       | `tb_role`, `tb_permission`, `tb_role_permission` 表数据被更新。 |
| **主流程 (简述)**  | 1. Boss 进入角色/权限管理界面。<br />2. Boss 执行 CRUD 操作。<br />3. Boss 管理角色权限关联。<br />4. System 更新数据库。<br />5. System 提示操作成功。 |
| **主要数据库操作** | - **查询/插入/更新/删除 `tb_role`**: 管理角色信息。<br />- **查询/插入/更新/删除 `tb_permission`**: 管理权限信息。<br />- **查询/插入/删除 `tb_role_permission`**: 管理角色权限关联。 |
| **相关需求**       | A级 - 账号管理 - 角色管理 (Boss 部分)                        |

| **Use Case ID**    | **UC-005**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 任命/解除管理员 (Assign/Revoke Admin Role) - Boss 专属       |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 将普通用户提升为管理员或将管理员降级为普通用户。             |
| **前置条件**       | Boss 已登录后台管理系统。目标用户存在。                      |
| **后置条件**       | 目标用户的 `tb_user.role` 更新，`tb_admin` 和 `tb_admin_role` 记录相应增删。 |
| **主流程 (简述)**  | 1. Boss 选择目标用户。<br />2. Boss 点击“设为管理员”或“解除管理员”。<br />3. System 更新数据库记录。<br />4. System 提示成功。 |
| **主要数据库操作** | - **更新 `tb_user`**: 修改 `role` 字段。<br />- **插入 `tb_admin`**: 任命时创建管理员记录。<br />- **删除 `tb_admin`**: 解除时删除管理员记录。<br />- **插入/删除 `tb_admin_role`**: 分配/移除具体角色关联。 |
| **相关需求**       | A级 - 账号管理 - 角色管理； A级 - Boss管理功能 - 任免        |

### 3.2 内容浏览与检索模块

| **Use Case ID**    | **UC-006**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 浏览/检索菜品信息 (<browse/Search Dishes)                    |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 查看平台上的菜品列表和详细信息。                             |
| **前置条件**       | 无。                                                         |
| **后置条件**       | 系统展示符合条件的菜品列表或特定菜品的详细信息。             |
| **主流程 (简述)**  | 1. Actor 进入菜品浏览/搜索界面。<br />2. Actor (可选)输入关键词或选择筛选条件。<br />3. System 查询数据库。<br />4. System 展示列表。<br />5. Actor (可选)点击查看详情。<br />6. System 展示详情。 |
| **主要数据库操作** | - **查询 `tb_dish`**: 获取菜品基本信息，按条件筛选 (`status`=1)。<br />- **查询 `tb_stall`, `tb_canteen`, `tb_campus` 等**: (通过 JOIN) 获取关联信息用于展示和筛选。 |
| **相关需求**       | A级 - 普通用户菜品点评功能 - 菜品检索                        |

| **Use Case ID**    | **UC-007**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看评价/评论列表 (View Reviews/Comments)                    |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 查看与某个对象（菜品/窗口/食堂/博客）关联的已通过审核的评价或评论。 |
| **前置条件**       | 正在查看关联对象详情。                                       |
| **后置条件**       | 系统展示相关评价/评论列表。                                  |
| **主流程 (简述)**  | 1. Actor 查看内容详情页。<br />2. System 查询数据库获取关联的已审核评价/评论。<br />3. System 展示列表。 |
| **主要数据库操作** | - **查询 `tb_review` / `tb_comment`**: 根据关联 ID (`dish_id`, `blog_id` 等) 筛选 `status`=1 的记录。<br />- **查询 `tb_user`**: (通过 JOIN) 获取评价/评论者的昵称、头像。 |
| **相关需求**       | A级 - 普通用户菜品点评功能 (隐含)                            |

| **Use Case ID**    | **UC-008**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看博客/笔记列表与详情 (View Blogs)                         |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 浏览用户发布的博客/笔记列表及查看详情。                      |
| **前置条件**       | 无。                                                         |
| **后置条件**       | 系统展示博客列表或特定博客的详细信息。                       |
| **主流程 (简述)**  | 1. Actor 进入博客区或搜索。<br />2. System 查询数据库获取博客列表。<br />3. System 展示列表。<br />4. Actor 点击查看详情。<br />5. System 展示详情及评论。 |
| **主要数据库操作** | - **查询 `tb_blog`**: 获取 `status`=0 的博客列表或特定博客详情。<br />- **查询 `tb_user`**: (通过 JOIN) 获取作者信息。<br />- **查询 `tb_blog_dish`, `tb_blog_topic`, `tb_blog_tag`**: 获取关联信息。<br />- **查询 `tb_comment`**: 获取博客评论。 |
| **相关需求**       | A级功能 (隐含)                                               |

| **Use Case ID**    | **UC-009**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看排行榜 (View Rankings)                                   |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 查看系统生成的各类排行榜（如菜品评分榜、用户积分榜）。       |
| **前置条件**       | 排行榜数据已由 System 计算并存储 (`tb_ranking`)。            |
| **后置条件**       | 系统展示指定类型的排行榜。                                   |
| **主流程 (简述)**  | 1. Actor 访问排行榜页面。<br />2. Actor 选择榜单类型。<br />3. System 查询数据库获取排名数据。<br />4. System 展示排行榜。 |
| **主要数据库操作** | - **查询 `tb_ranking`**: 根据 `type` 获取排名数据。<br />- **查询 `tb_dish`, `tb_user` 等**: (通过 JOIN) 获取排行对象名称等信息。 |
| **相关需求**       | A级 - 普通用户菜品点评功能 - 菜品排行与推荐； B级 - 用户激励机制 - 积分排行榜 |

| **Use Case ID**    | **UC-010**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看系统公告 (View Notices)                                  |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 查看已发布的系统公告。                                       |
| **前置条件**       | 存在 `status`=1 的公告。                                     |
| **后置条件**       | 系统展示公告列表或公告详情。                                 |
| **主流程 (简述)**  | 1. Actor 访问公告列表或首页公告区。<br />2. System 查询数据库获取有效公告。<br />3. System 展示列表。<br />4. Actor 点击查看详情。<br />5. System 展示公告内容。 |
| **主要数据库操作** | - **查询 `tb_notice`**: 获取 `status`=1 且在有效期内的公告记录。 |
| **相关需求**       | A级功能 (隐含)                                               |

### 3.3 内容创作与互动模块

| **Use Case ID**    | **UC-011**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 提交评价与评分 (Submit Review)                               |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 对某个菜品、窗口或食堂提交评价和评分。                       |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | 成功：创建新评价记录 (`tb_review`)，状态待审核。<br />失败：评价未提交。 |
| **主流程 (简述)**  | 1. User 点击“写评价”。<br />2. User 填写内容、评分、(可选)上传图片。<br />3. User 提交。<br />4. System 验证并存储评价 (`status`=0)。<br />5. System 提示成功。 |
| **主要数据库操作** | - **插入 `tb_file`**: (若有图) 存储图片信息。<br />- **插入 `tb_review`**: 创建评价记录，`status`=0。 |
| **相关需求**       | A级 - 普通用户菜品点评功能 - 菜品点评                        |

| **Use Case ID**    | **UC-012**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 发表评论 (Submit Comment)                                    |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 对博客或评价发表评论，或回复已有评论。                       |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | 成功：创建新评论记录 (`tb_comment`)，状态待审核。<br />失败：评论未提交。 |
| **主流程 (简述)**  | 1. User 在内容下方评论区操作。<br />2. User 输入评论内容。<br />3. User 提交。<br />4. System 验证并存储评论 (`status`=0)。<br />5. System 提示成功。 |
| **主要数据库操作** | - **插入 `tb_comment`**: 创建评论记录，关联 `blog_id`/`review_id`/`parent_id`，`status`=0。 |
| **相关需求**       | A级功能 (隐含)                                               |

| **Use Case ID**    | **UC-013**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 发表/管理博客 (Manage Blog)                                  |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 创建、编辑、删除自己的博客/笔记。                            |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | `tb_blog` 及关联表数据被创建/更新/删除。                     |
| **主流程 (简述)**  | **创建**: User 填写并提交 -> System 存储。<br />**编辑**: User 选择编辑 -> System 显示 -> User 修改提交 -> System 更新。<br />**删除**: User 选择删除 -> User 确认 -> System 删除。 |
| **主要数据库操作** | - **插入 `tb_blog`**: 创建博客。<br />- **更新 `tb_blog`**: 修改博客。<br />- **删除 `tb_blog`**: 删除博客。<br />- **插入/删除 `tb_blog_dish`, `tb_blog_topic`, `tb_blog_tag`**: 管理关联。<br />- **插入 `tb_file`**: (若有图) 存储图片。 |
| **相关需求**       | A级功能 (隐含)                                               |

| **Use Case ID**    | **UC-014**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 点赞/取消点赞内容 (Like/Unlike Content)                      |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 对博客、评价、评论进行点赞或取消。                           |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | `tb_like` 记录增/删。对应内容 `liked` 计数更新（可能异步）。 |
| **主流程 (简述)**  | 1. User 点击点赞/已点赞按钮。<br />2. System 检查并更新点赞记录。<br />3. System 更新前端显示。<br />4. System (异步) 更新计数。 |
| **主要数据库操作** | - **查询/插入/删除 `tb_like`**: 管理点赞关系。<br />- **更新 `tb_blog`/`tb_review`/`tb_comment`**: 更新 `liked` 计数。 |
| **相关需求**       | A级功能 (隐含)                                               |

| **Use Case ID**    | **UC-015**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 收藏/取消收藏项目 (Favorite/Unfavorite Item)                 |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 收藏或取消收藏项目（博客、评价、食堂、窗口、菜品）。         |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | `tb_favorite` 记录增/删。                                    |
| **主流程 (简述)**  | 1. User 点击收藏/已收藏按钮。<br />2. System 检查并更新收藏记录。<br />3. System 更新前端显示。 |
| **主要数据库操作** | - **查询/插入/删除 `tb_favorite`**: 管理收藏关系。           |
| **相关需求**       | A级功能 (隐含)                                               |

| **Use Case ID**    | **UC-016**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 关注/取关用户 (Follow/Unfollow User)                         |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 关注或取消关注其他用户。                                     |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | `tb_follow` 记录增/删。                                      |
| **主流程 (简述)**  | 1. User 点击关注/已关注按钮。<br />2. System 检查并更新关注记录。<br />3. System 更新前端显示。 |
| **主要数据库操作** | - **查询/插入/删除 `tb_follow`**: 管理关注关系。             |
| **相关需求**       | B级 - 用户交互优化 - 用户社区                                |

| **Use Case ID**    | **UC-017**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 搜索内容 (Search Content)                                    |
| **Actor(s)**       | Anonymous User, User, Admin, Boss                            |
| **用例目标**       | 根据关键词搜索系统内的内容（如菜品、博客）。                 |
| **前置条件**       | 无。                                                         |
| **后置条件**       | 系统展示匹配结果列表。 (User) `tb_search_history` 记录增加。 |
| **主流程 (简述)**  | 1. Actor 输入关键词并提交搜索。<br />2. System 查询相关表。<br />3. System 返回结果。<br />4. (User) System 记录搜索历史。 |
| **主要数据库操作** | - **查询 `tb_dish`, `tb_blog` 等**: 根据关键词进行模糊匹配。<br />- **插入 `tb_search_history`**: 记录用户搜索词。 |
| **相关需求**       | A级 (隐含)                                                   |

### 3.4 后台管理 - 内容与数据模块 (Admin)

| **Use Case ID**    | **UC-018**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 内容审核 (Moderate Content)                                  |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 审核用户提交的评价、评论、博客。                             |
| **前置条件**       | Admin 已登录后台。存在待审核内容。                           |
| **后置条件**       | 内容状态 (`tb_review/comment/blog.status`) 更新为通过(1)或拒绝(2)。 |
| **主流程 (简述)**  | 1. Admin 进入审核队列。<br />2. Admin 查看内容。<br />3. Admin 选择通过或拒绝。<br />4. System 更新内容状态及审核信息。 |
| **主要数据库操作** | - **查询 `tb_review`/`tb_comment`/`tb_blog`**: 获取 `status`=0 的记录。<br />- **更新 `tb_review`/`tb_comment`/`tb_blog`**: 修改 `status`, `auditor_id`, `audit_time` 等。 |
| **相关需求**       | A级 - 普通用户菜品点评功能 - 评论审核； A级 - 管理员后台管理功能 - 评论审核管理 |

| **Use Case ID**    | **UC-019**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理基础数据 (Manage Core Data - e.g., Dishes)               |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 管理 (增删改查) 校区、食堂类型、食堂、窗口类型、窗口、菜品信息。 |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | `tb_campus`, `tb_canteen_type`, `tb_canteen`, `tb_stall_type`, `tb_stall`, `tb_dish` 数据被更新。 |
| **主流程 (简述)**  | 1. Admin 进入相应数据管理模块。<br />2. Admin 执行 CRUD 操作。<br />3. System 验证并更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除 (或更新 status)**: 对 `tb_campus`, `tb_canteen_type` ... `tb_dish` 表执行操作。 |
| **相关需求**       | A级 - 管理员后台管理功能 - 菜品数据管理                      |

| **Use Case ID**    | **UC-020**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理话题与标签 (Manage Topics & Tags)                        |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 创建、编辑、删除（或隐藏）系统内的话题和标签。               |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | `tb_topic`, `tb_tag` 表数据被更新。                          |
| **主流程 (简述)**  | 1. Admin 进入话题/标签管理界面。<br />2. Admin 执行 CRUD (或更新 `status`) 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除 (或更新 status)**: 对 `tb_topic`, `tb_tag` 表执行操作。 |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-021**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理用户内容 (Manage User Content)                           |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 隐藏或删除用户发布的违规或不当内容（评价、评论、博客）。     |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | 目标内容的 `status` 被更新为隐藏或删除状态。                 |
| **主流程 (简述)**  | 1. Admin 找到目标内容。<br />2. Admin 选择隐藏或删除操作。<br />3. Admin 确认。<br />4. System 更新内容状态。 |
| **主要数据库操作** | - **更新 `tb_review`/`tb_comment`/`tb_blog`**: 修改 `status` 字段。 |
| **相关需求**       | A级 - 管理员后台管理功能 - 用户数据维护                      |

### 3.5 后台管理 - 运营与支持模块 (Admin)

| **Use Case ID**    | **UC-022**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理公告 (Manage Notices)                                    |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 发布、编辑、下线系统公告。                                   |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | `tb_notice` 表数据被创建或更新。                             |
| **主流程 (简述)**  | 1. Admin 进入公告管理界面。<br />2. Admin 执行 CRUD 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新 `tb_notice`**: 管理公告信息。             |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-023**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 处理用户举报 (Handle Reports)                                |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 查看并处理用户提交的举报信息。                               |
| **前置条件**       | Admin 已登录后台。存在待处理举报 (`tb_report.status`=0)。    |
| **后置条件**       | 举报记录的 `status` 更新为已处理或已驳回，记录处理信息。     |
| **主流程 (简述)**  | 1. Admin 进入举报处理列表。<br />2. Admin 查看详情。<br />3. Admin 决定处理结果。<br />4. Admin 确认。<br />5. System 更新举报记录状态。 |
| **主要数据库操作** | - **查询 `tb_report`**: 获取 `status`=0 的记录。<br />- **更新 `tb_report`**: 修改 `status`, `handle_admin_id`, `handle_note`。 |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-024**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 处理用户反馈 (Handle Feedback)                               |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 查看用户提交的反馈并进行回复。                               |
| **前置条件**       | Admin 已登录后台。存在待处理反馈 (`tb_feedback.status`=0)。  |
| **后置条件**       | 反馈记录的 `status` 更新为已处理，记录回复内容和处理人。     |
| **主流程 (简述)**  | 1. Admin 进入反馈列表。<br />2. Admin 查看详情。<br />3. Admin 输入回复。<br />4. Admin 提交。<br />5. System 更新反馈记录状态。 |
| **主要数据库操作** | - **查询 `tb_feedback`**: 获取 `status`=0 的记录。<br />- **更新 `tb_feedback`**: 修改 `status`, `response`, `admin_id`。 |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-025**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理轮播图 (Manage Banners)                                  |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 添加、编辑、排序、上下线首页轮播图。                         |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | `tb_banner` 表数据被更新。                                   |
| **主流程 (简述)**  | 1. Admin 进入轮播图管理界面。<br />2. Admin 执行 CRUD (或更新 `status`, `sort`) 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除 (或更新 status)**: 对 `tb_banner` 表执行操作。 |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-026**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理系统图片 (Manage System Images)                          |
| **Actor(s)**       | Admin                                                        |
| **用例目标**       | 管理系统使用的图片素材（如默认头像、分类图标等）。           |
| **前置条件**       | Admin 已登录后台。                                           |
| **后置条件**       | `tb_image_category`, `tb_image` 表数据被更新。               |
| **主流程 (简述)**  | 1. Admin 进入图片分类或图片管理界面。<br />2. Admin 执行 CRUD (或更新 `status`) 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除? `tb_image_category`**: 管理图片分类。<br />- **查询/插入/删除 (或更新 status) `tb_image`**: 管理图片。<br />- (可能) **插入 `tb_file`**: 如果系统图片也存储在文件表。 |
| **相关需求**       | 后台管理 (隐含)                                              |

### 3.6 后台管理 - 系统与规则模块 (Boss)

| **Use Case ID**    | **UC-027**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理系统配置 (Manage System Configuration)                   |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 添加、修改、查看系统核心配置参数和敏感词。                   |
| **前置条件**       | Boss 已登录后台。                                            |
| **后置条件**       | `tb_config`, `tb_sensitive_word` 表数据被更新。              |
| **主流程 (简述)**  | 1. Boss 进入系统配置或敏感词管理界面。<br />2. Boss 执行 CRUD 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除 `tb_config`**: 管理配置项。<br />- **查询/插入/更新/删除 `tb_sensitive_word`**: 管理敏感词。 |
| **相关需求**       | Boss 管理功能 (隐含)                                         |

| **Use Case ID**    | **UC-028**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看系统日志 (View System Logs)                              |
| **Actor(s)**       | Boss, Admin (部分权限)                                       |
| **用例目标**       | 查看系统的操作日志，用于审计和问题追踪。                     |
| **前置条件**       | Actor 已登录后台。                                           |
| **后置条件**       | 系统展示符合筛选条件的日志记录。                             |
| **主流程 (简述)**  | 1. Actor 进入日志查看界面。<br />2. Actor 设置筛选条件。<br />3. Actor 提交查询。<br />4. System 查询并展示日志。 |
| **主要数据库操作** | - **查询 `tb_log`**: 根据条件筛选日志记录。                  |
| **相关需求**       | A级 - Boss 管理功能 - 系统数据查看                           |

| **Use Case ID**    | **UC-029**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看统计分析 (View Statistics)                               |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 查看系统的各类统计数据和分析报告。                           |
| **前置条件**       | Boss 已登录后台。System 已生成统计数据 (`tb_statistics`)。   |
| **后置条件**       | 系统展示统计图表或数据。                                     |
| **主流程 (简述)**  | 1. Boss 进入统计分析界面。<br />2. Boss 选择统计维度和时间范围。<br />3. System 查询或计算数据。<br />4. System 展示结果。 |
| **主要数据库操作** | - **查询 `tb_statistics`**: 获取预计算的统计数据。<br />- (可能) **聚合查询** 其他相关表（如 `tb_review`, `tb_user`）实时计算。 |
| **相关需求**       | A级 - Boss 管理功能 - 系统数据查看；A级 - Boss 管理功能 - 后台统计 |

| **Use Case ID**    | **UC-030**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理用户账号 (Manage User Accounts)                          |
| **Actor(s)**       | Boss, Admin (部分权限)                                       |
| **用例目标**       | 查看用户列表，(Boss)禁用/启用用户账号、修改用户信息。        |
| **前置条件**       | Actor 已登录后台。                                           |
| **后置条件**       | `tb_user` 表中用户的 `status` 或其他信息被更新。             |
| **主流程 (简述)**  | 1. Actor 进入用户管理列表。<br />2. Actor 搜索/筛选用户。<br />3. Actor 查看详情。<br />4. (Boss) Actor 执行禁用/启用/修改操作。<br />5. System 更新数据库。 |
| **主要数据库操作** | - **查询 `tb_user`**: 获取用户列表和详情。<br />- **更新 `tb_user`**: 修改 `status`, `nickname` 等字段。 |
| **相关需求**       | A级 - 管理员后台管理功能 - 用户数据维护； Boss 管理功能 (隐含) |

| **Use Case ID**    | **UC-031**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理版本信息 (Manage Version)                                |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 添加、管理应用（Android/iOS/Web）的版本信息。                |
| **前置条件**       | Boss 已登录后台。                                            |
| **后置条件**       | `tb_version` 表数据被更新。                                  |
| **主流程 (简述)**  | 1. Boss 进入版本管理界面。<br />2. Boss 执行 CRUD (或更新 `status`) 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新 `tb_version`**: 管理版本信息。            |
| **相关需求**       | 后台管理 (隐含)                                              |

| **Use Case ID**    | **UC-032**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 管理激励规则 (Manage Engagement Rules)                       |
| **Actor(s)**       | Boss                                                         |
| **用例目标**       | 定义和管理活动、优惠券、勋章、用户等级规则。                 |
| **前置条件**       | Boss 已登录后台。                                            |
| **后置条件**       | `tb_activity`, `tb_voucher`, `tb_medal`, `tb_level_rule` 表数据被更新。 |
| **主流程 (简述)**  | 1. Boss 进入相应规则管理界面。<br />2. Boss 执行 CRUD (或更新 `status`) 操作。<br />3. System 更新数据库。 |
| **主要数据库操作** | - **查询/插入/更新/删除 (或更新 status)**: 对 `tb_activity`, `tb_voucher`, `tb_medal`, `tb_level_rule` 表执行操作。 |
| **相关需求**       | Boss 管理功能 (隐含)                                         |

### 3.7 用户激励模块 (User)

| **Use Case ID**    | **UC-033**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 每日签到 (Daily Sign-in)                                     |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 执行每日签到操作以获取积分。                                 |
| **前置条件**       | User 已登录。当天未签到。                                    |
| **后置条件**       | 成功：创建签到记录(`tb_sign`)，用户积分(`tb_user.credits`)增加，增加积分记录(`tb_credit_record`)。<br />失败：状态不变，提示错误。 |
| **主流程 (简述)**  | 1. User 点击签到按钮。<br />2. System 检查是否已签到。<br />3. 若未签到，System 更新数据库记录。<br />4. System 提示成功。 |
| **主要数据库操作** | - **查询 `tb_sign`**: 检查当天签到记录。<br />- **插入 `tb_sign`**: 创建签到记录。<br />- **更新 `tb_user`**: 增加 `credits`。<br />- **插入 `tb_credit_record`**: 记录积分变动。 |
| **相关需求**       | B级 - 用户激励机制 (隐含)                                    |

| **Use Case ID**    | **UC-034**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看与使用积分 (View & Use Credits)                          |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 查看个人积分余额和明细，使用积分兑换项目（如优惠券）。       |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | (兑换时) 用户积分减少，积分记录增加，获得兑换物。            |
| **主流程 (简述)**  | 1. User 查看积分/明细。<br />2. User 选择兑换优惠券。<br />3. System 检查积分和库存。<br />4. System 执行兑换操作（扣积分、减库存、发券、记流水）。<br />5. System 提示成功。 |
| **主要数据库操作** | - **查询 `tb_user`**: 获取 `credits`。<br />- **查询 `tb_credit_record`**: 获取积分明细。<br />- **查询 `tb_voucher`**: 获取兑换所需积分和 `stock`。<br />- **更新 `tb_user`**: 扣减 `credits` (需检查余额)。<br />- **更新 `tb_voucher`**: 减少 `stock` (需检查库存)。<br />- **插入 `tb_user_voucher`**: 发放优惠券。<br />- **插入 `tb_credit_record`**: 记录积分消耗。 |
| **相关需求**       | B级 - 用户激励机制 - 积分系统                                |

| **Use Case ID**    | **UC-035**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看与使用优惠券 (View & Use Vouchers)                       |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 查看自己拥有的优惠券，并在符合条件时使用。                   |
| **前置条件**       | User 已登录。拥有未使用且未过期的优惠券 (`tb_user_voucher.status`=0)。 |
| **后置条件**       | (使用时) 优惠券状态 (`tb_user_voucher.status`) 更新为已使用(1)，记录使用时间 (`use_time`)。 |
| **主流程 (简述)**  | 1. User 查看优惠券列表。<br />2. User 在符合条件的场景选择使用。<br />3. System 验证优惠券。<br />4. System 更新优惠券状态。<br />5. System 应用优惠。 |
| **主要数据库操作** | - **查询 `tb_user_voucher`**: 获取用户持有的优惠券列表 (JOIN `tb_voucher` 获取详情)。<br />- **更新 `tb_user_voucher`**: 修改 `status`=1, `use_time`。 |
| **相关需求**       | B级 - 用户激励机制 (隐含)                                    |

| **Use Case ID**    | **UC-036**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 查看勋章 (View Medals)                                       |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 查看自己已获得的勋章列表及详情。                             |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | 系统展示用户获得的勋章列表。                                 |
| **主流程 (简述)**  | 1. User 访问勋章墙。<br />2. System 查询用户已获得的勋章。<br />3. System 展示列表。 |
| **主要数据库操作** | - **查询 `tb_user_medal`**: 获取用户的勋章关联记录。<br />- **查询 `tb_medal`**: (JOIN) 获取勋章详情。 |
| **相关需求**       | B级 - 用户激励机制 - 勋章系统                                |

| **Use Case ID**    | **UC-037**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 参与活动 (Participate in Activity)                           |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 查看进行中的活动，报名参与活动，并根据活动规则完成任务。     |
| **前置条件**       | User 已登录。存在进行中的活动 (`tb_activity.status`=1)。     |
| **后置条件**       | 用户参与记录 (`tb_user_activity`) 被创建/更新。可能获得奖励。 |
| **主流程 (简述)**  | 1. User 浏览活动列表。<br />2. User 查看详情并报名。<br />3. System 创建参与记录。<br />4. User 完成活动任务。<br />5. System 更新参与进度/状态。<br />6. System 发放奖励（若达成）。 |
| **主要数据库操作** | - **查询 `tb_activity`**: 获取活动列表和详情。<br />- **查询/插入/更新 `tb_user_activity`**: 管理用户参与状态和进度。<br />- (奖励发放) **更新 `tb_user`, `tb_user_medal`, `tb_user_voucher` 等**。 |
| **相关需求**       | B级 - 用户激励机制 (隐含)                                    |

### 3.8 AI 交互模块 (User)

| **Use Case ID**    | **UC-038**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 与 AI 对话了解内容 (Chat with AI about Content)              |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 用户通过 AI 助手提问，以更好地理解当前查看的内容（如菜品、评价）。 |
| **前置条件**       | User 已登录。正在查看支持 AI 对话的内容页面。                |
| **后置条件**       | 用户在界面上获得 AI 基于当前内容生成的回答。                 |
| **主流程 (简述)**  | 1. User 找到 AI 对话模块。<br />2. User 输入问题并发送。<br />3. System (前后端协作) 获取上下文数据，调用 LLM API，返回并显示 AI 回答。 |
| **主要数据库操作** | - **查询 `tb_dish`, `tb_review`, `tb_comment` 等**: 读取内容用于构建提供给 LLM API 的上下文。 |
| **相关需求**       | C级 - AI与本地知识库部署                                     |

### 3.9 其他模块

| **Use Case ID**    | **UC-039**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 提交反馈 (Submit Feedback)                                   |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 用户向系统提交功能建议、问题报告或其他反馈。                 |
| **前置条件**       | User 已登录。                                                |
| **后置条件**       | 创建新的反馈记录 (`tb_feedback`)，状态为未处理 (`status`=0)。 |
| **主流程 (简述)**  | 1. User 访问反馈页面。<br />2. User 填写反馈信息。<br />3. User 提交。<br />4. System 存储反馈记录。 |
| **主要数据库操作** | - **插入 `tb_feedback`**: 创建反馈记录。                     |
| **相关需求**       | 用户支持 (隐含)                                              |

| **Use Case ID**    | **UC-040**                                                   |
| ------------------ | ------------------------------------------------------------ |
| **Use Case Name**  | 提交举报 (Submit Report)                                     |
| **Actor(s)**       | User                                                         |
| **用例目标**       | 用户举报系统内的违规内容（博客、评价、评论）或违规用户。     |
| **前置条件**       | User 已登录。找到要举报的对象。                              |
| **后置条件**       | 创建新的举报记录 (`tb_report`)，状态为未处理 (`status`=0)。  |
| **主流程 (简述)**  | 1. User 点击举报入口。<br />2. User 选择类型/原因，填写描述，(可选)上传证据。<br />3. User 提交。<br />4. System 存储举报记录。 |
| **主要数据库操作** | - **插入 `tb_file`**: (若有图) 存储证据图片。<br />- **插入 `tb_report`**: 创建举报记录。 |
| **相关需求**       | 用户支持 (隐含)                                              |

------