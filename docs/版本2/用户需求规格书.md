# ğŸ“ å¤©æ´¥å¤§å­¦é£Ÿå ‚èœå“ç‚¹è¯„ç³»ç»Ÿ - ç”¨æˆ·éœ€æ±‚è§„æ ¼ä¹¦

## ç³»ç»Ÿæ¦‚è¿°

"å¤©æ´¥å¤§å­¦é£Ÿå ‚èœå“ç‚¹è¯„ç³»ç»Ÿ" æ—¨åœ¨ä¸ºå¤©æ´¥å¤§å­¦å¸ˆç”Ÿä¸é£Ÿå ‚ç®¡ç†è€…ä¹‹é—´æ­å»ºä¸€ä¸ªé«˜æ•ˆäº’åŠ¨çš„ä¿¡æ¯å¹³å°ã€‚ç³»ç»Ÿä»¥èœå“ç‚¹è¯„ä¸ºæ ¸å¿ƒï¼Œé›†æˆç”¨æˆ·ç¤¾åŒºã€ä¼˜æƒ åˆ¸å…‘æ¢ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸ºç®¡ç†è€…æä¾›å¯è§†åŒ–æ•°æ®çœ‹æ¿ï¼Œå¸®åŠ©é£Ÿå ‚åŠ¨æ€è°ƒæ•´èœå•ç»“æ„ã€ä¼˜åŒ–æœåŠ¡ã€‚

## ğŸ‘¥ ç³»ç»Ÿè§’è‰²

### è§’è‰²å®šä¹‰

-   **anonymous**ï¼ˆæœªæ³¨å†Œç”¨æˆ·ï¼‰ï¼šå¯ä»¥è¿›è¡Œæ¸¸å®¢è®¿é—®ï¼Œè¿›è¡Œèœå“æµè§ˆã€æŸ¥çœ‹ç‚¹è¯„ã€æ³¨å†Œè´¦å·ç­‰æ“ä½œã€‚
-   **user**ï¼ˆå·²æ³¨å†Œç”¨æˆ·ï¼‰ï¼šå·²é€šè¿‡é‚®ç®±æˆ–æ‰‹æœºå·æ³¨å†Œï¼Œå¹¶ç™»å½•åä½¿ç”¨ç³»ç»ŸåŠŸèƒ½ã€‚å¯ä»¥è¿›è¡Œèœå“ç‚¹è¯„ã€æŸ¥çœ‹èœå•ã€è·å–æ¨èç­‰æ“ä½œã€‚
-   **admin**ï¼ˆåå°ç®¡ç†å‘˜ï¼‰ï¼šå…·æœ‰è¾ƒé«˜æƒé™ï¼Œè´Ÿè´£å®¡æ ¸ **user** æäº¤çš„è¯„è®ºï¼Œç®¡ç†åŸºç¡€æ•°æ® (é£Ÿå ‚/çª—å£/èœå“)ã€ç”¨æˆ·å‘å¸ƒå†…å®¹ã€å¤„ç†ç”¨æˆ·åé¦ˆä¸ä¸¾æŠ¥ç­‰ã€‚
-   **boss**ï¼ˆå¹³å°ç®¡ç†è€…ï¼‰ï¼šæ‹¥æœ‰ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œå¯ä»¥ç®¡ç†ç®¡ç†å‘˜è´¦å·ã€è§’è‰²æƒé™ã€ç³»ç»Ÿé…ç½®ã€æ ¸å¿ƒè§„åˆ™ï¼ˆç­‰çº§/æ´»åŠ¨/å‹‹ç« /ä¼˜æƒ åˆ¸ï¼‰ã€ç»Ÿè®¡åˆ†æç­‰ã€‚

### ğŸ“Š è§’è‰²åŠŸèƒ½æƒé™åˆ’åˆ†è¡¨

| åŠŸèƒ½æ¨¡å—            | åŠŸèƒ½æè¿°                          | anonymous | user | admin      | boss      |
| :------------------ | :-------------------------------- | :-------- | :--- | :--------- | :-------- |
| **è´¦å·ä¸è®¤è¯**      | æ³¨å†Œè´¦å·                          | âœ…         | âŒ    | âŒ          | âŒ         |
|                     | ç™»å½•ç³»ç»Ÿ (è´¦å·å¯†ç /éªŒè¯ç )        | âŒ         | âœ…    | âœ…          | âœ…         |
|                     | ç®¡ç†ä¸ªäººä¿¡æ¯ (æ˜µç§°/å¤´åƒ/ç®€ä»‹ç­‰)   | âŒ         | âœ…    | âŒ          | âœ…ç®¡ç†æ‰€æœ‰ |
| **åŸºç¡€æµè§ˆ**        | æµè§ˆèœå“/é£Ÿå ‚/çª—å£/æ ¡åŒºä¿¡æ¯       | âœ…         | âœ…    | âœ…          | âœ…         |
|                     | æŸ¥çœ‹å…¬å¼€çš„è¯„ä»·/è¯„è®º/åšå®¢          | âœ…         | âœ…    | âœ…          | âœ…         |
|                     | æŸ¥çœ‹è¯é¢˜/æ ‡ç­¾åˆ—è¡¨                 | âœ…         | âœ…    | âœ…          | âœ…         |
|                     | æŸ¥çœ‹æ’è¡Œæ¦œ (èœå“/ç§¯åˆ†ç­‰)          | âœ…         | âœ…    | âœ…          | âœ…         |
|                     | æŸ¥çœ‹ç³»ç»Ÿå…¬å‘Š                      | âœ…         | âœ…    | âœ…          | âœ…         |
| **å†…å®¹åˆ›ä½œä¸ç®¡ç†**  | æäº¤è¯„ä»·/è¯„åˆ†                     | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æäº¤è¯„è®º (åšå®¢/è¯„ä»·)              | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | å‘å¸ƒ/ç¼–è¾‘/åˆ é™¤è‡ªå·±çš„åšå®¢          | âŒ         | âœ…    | âœ…ç®¡ç†æ‰€æœ‰  | âœ…ç®¡ç†æ‰€æœ‰ |
|                     | å…³è”åšå®¢åˆ°èœå“/è¯é¢˜/æ ‡ç­¾          | âŒ         | âœ…    | âŒ          | âŒ         |
| **å†…å®¹äº’åŠ¨**        | ç‚¹èµ/å–æ¶ˆç‚¹èµ (åšå®¢/è¯„ä»·/è¯„è®º)    | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æ”¶è—/å–æ¶ˆæ”¶è— (å¤šç±»å‹å†…å®¹)        | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | å…³æ³¨/å–å…³ç”¨æˆ·                     | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æŸ¥çœ‹/å‘é€æ¶ˆæ¯ (ç³»ç»Ÿé€šçŸ¥/ç§ä¿¡?)    | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æœç´¢å†…å®¹ (èœå“/åšå®¢ç­‰)            | âœ…         | âœ…    | âœ…          | âœ…         |
| **ç”¨æˆ·æ¿€åŠ±**        | æ¯æ—¥ç­¾åˆ°                          | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æŸ¥çœ‹/ä½¿ç”¨ç§¯åˆ†                     | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æŸ¥çœ‹/é¢†å–/ä½¿ç”¨ä¼˜æƒ åˆ¸              | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æŸ¥çœ‹ä¸ªäººå‹‹ç«                       | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | æŸ¥çœ‹ç­‰çº§ä¸è§„åˆ™                    | âœ…         | âœ…    | âœ…          | âœ…         |
|                     | å‚ä¸çº¿ä¸Šæ´»åŠ¨                      | âŒ         | âœ…    | âŒ          | âŒ         |
| **ç”¨æˆ·æ”¯æŒ**        | æäº¤åé¦ˆæ„è§                      | âŒ         | âœ…    | âŒ          | âŒ         |
|                     | ä¸¾æŠ¥è¿è§„å†…å®¹/ç”¨æˆ·                 | âŒ         | âœ…    | âŒ          | âŒ         |
| **åå°ç®¡ç† - å†…å®¹** | å®¡æ ¸è¯„ä»·/è¯„è®º/åšå®¢                | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | ç®¡ç†(éšè—/åˆ é™¤)ç”¨æˆ·å‘å¸ƒçš„å†…å®¹     | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | ç®¡ç†è¯é¢˜/æ ‡ç­¾                     | âŒ         | âŒ    | âœ…          | âœ…         |
| **åå°ç®¡ç† - æ•°æ®** | ç®¡ç†æ ¡åŒº/é£Ÿå ‚/çª—å£/èœå“           | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | ç®¡ç†é£Ÿå ‚/çª—å£ç±»å‹                 | âŒ         | âŒ    | âœ…          | âœ…         |
| **åå°ç®¡ç† - è¿è¥** | ç®¡ç†å…¬å‘Š                          | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | ç®¡ç†è½®æ’­å›¾                        | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | ç®¡ç†ç³»ç»Ÿå›¾ç‰‡åº“                    | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | å¤„ç†ç”¨æˆ·ä¸¾æŠ¥                      | âŒ         | âŒ    | âœ…          | âœ…         |
|                     | å¤„ç†ç”¨æˆ·åé¦ˆ                      | âŒ         | âŒ    | âœ…          | âœ…         |
| **åå°ç®¡ç† - ç³»ç»Ÿ** | æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—                      | âŒ         | âŒ    | âœ…éƒ¨åˆ†      | âœ…å…¨éƒ¨     |
|                     | æŸ¥çœ‹ç»Ÿè®¡/åˆ†ææ•°æ®                 | âŒ         | âŒ    | âŒ          | âœ…         |
|                     | ç®¡ç†ç”¨æˆ·è´¦å· (æŸ¥è¯¢/ç¦ç”¨/æ”¹è§’ç­‰)   | âŒ         | âŒ    | âœ…æŸ¥è¯¢/ç¦ç”¨ | âœ…å…¨éƒ¨     |
|                     | ä»»å‘½/è§£é™¤ Admin                   | âŒ         | âŒ    | âŒ          | âœ…         |
|                     | ç®¡ç†è§’è‰²ä¸æƒé™                    | âŒ         | âŒ    | âŒ          | âœ…         |
|                     | ç®¡ç†ç³»ç»Ÿé…ç½® (åŸºç¡€å‚æ•°/æ•æ„Ÿè¯)    | âŒ         | âŒ    | âŒ          | âœ…         |
|                     | ç®¡ç†ç‰ˆæœ¬ä¿¡æ¯                      | âŒ         | âŒ    | âŒ          | âœ…         |
|                     | ç®¡ç†æ´»åŠ¨/ä¼˜æƒ åˆ¸/å‹‹ç« /ç­‰çº§è§„åˆ™å®šä¹‰ | âŒ         | âŒ    | âŒ          | âœ…         |

*è¯´æ˜ï¼š*
-   âœ…ï¼šè¡¨ç¤ºè¯¥è§’è‰²æ‹¥æœ‰æ­¤é¡¹åŠŸèƒ½æƒé™ã€‚
-   âŒï¼šè¡¨ç¤ºè¯¥è§’è‰²é€šå¸¸ä¸æ‹¥æœ‰æ­¤é¡¹åŠŸèƒ½æƒé™ã€‚
-   ç‰¹å®šè¯´æ˜ï¼ˆå¦‚ âœ…å®¡æ ¸, âœ…éƒ¨åˆ†, âœ…ç®¡ç†æ‰€æœ‰ï¼‰è¡¨ç¤ºæ›´å…·ä½“çš„æƒé™èŒƒå›´ã€‚

### ğŸ”’ æƒé™æ§åˆ¶

-   **anonymous** ç”¨æˆ·ä»…é™äºæµè§ˆå…¬å¼€ä¿¡æ¯å’Œæ³¨å†Œã€‚
-   **user** ç”¨æˆ·æ˜¯å¹³å°å†…å®¹çš„ä¸»è¦æ¶ˆè´¹è€…å’Œè´¡çŒ®è€…ï¼Œæ‹¥æœ‰å¤§éƒ¨åˆ†äº’åŠ¨å’Œä¸ªæ€§åŒ–åŠŸèƒ½æƒé™ã€‚
-   **admin** ç”¨æˆ·è´Ÿè´£æ—¥å¸¸çš„å†…å®¹å®¡æ ¸ã€æ•°æ®ç»´æŠ¤å’Œç”¨æˆ·æ”¯æŒå·¥ä½œã€‚
-   **boss** ç”¨æˆ·æ‹¥æœ‰å¯¹æ•´ä¸ªç³»ç»Ÿï¼ˆåŒ…æ‹¬ç”¨æˆ·ã€æƒé™ã€é…ç½®ã€è§„åˆ™ï¼‰çš„å®Œå…¨æ§åˆ¶æƒå’Œç›‘ç£æƒã€‚

------

## âš™ï¸ ç³»ç»ŸåŠŸèƒ½

### Açº§åŠŸèƒ½ï¼ˆå¿…é¡»å®ç°ï¼‰

#### è´¦å·ç®¡ç†

-   **ç”¨æˆ·æ³¨å†Œ**ï¼š**anonymous** ç”¨æˆ·é€šè¿‡é‚®ç®±æˆ–æ‰‹æœºå·æ³¨å†Œï¼Œåˆ›å»ºè´¦æˆ·æˆä¸º **user**ã€‚å¯†ç éœ€ç¬¦åˆå¤æ‚åº¦è¦æ±‚å¹¶è¿›è¡Œ**å®‰å…¨åŠ å¯†**å­˜å‚¨ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_user`, `tb_verification` (å¯é€‰)
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_user`: `username`, `email`, `phone`, `password`, `nickname`, `role`, `status`, `create_time`, `update_time`
            -   `tb_verification`: `code`, `status`, `expire_time`, `phone`/`email`, `type`
    -   **æ¶‰åŠåŠŸèƒ½**: æ£€æŸ¥ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·å”¯ä¸€æ€§ï¼›æ’å…¥æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆå«åŠ å¯†å¯†ç ã€é»˜è®¤è§’è‰²0å’ŒçŠ¶æ€0ï¼‰ï¼›éªŒè¯æ³¨å†ŒéªŒè¯ç çš„æœ‰æ•ˆæ€§å¹¶æ›´æ–°å…¶çŠ¶æ€ã€‚

-   **ç”¨æˆ·ç™»å½•**ï¼š**user**, **admin**, **boss** ç”¨æˆ·é€šè¿‡é‚®ç®±æˆ–æ‰‹æœºå·åŠå¯†ç ç™»å½•ç³»ç»Ÿã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_user`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `password` (å“ˆå¸Œå€¼), `status`, `role`, `email`, `phone`
    -   **æ¶‰åŠåŠŸèƒ½**: æ ¹æ® `email` æˆ– `phone` æŸ¥è¯¢ç”¨æˆ·ï¼ŒéªŒè¯ `status`=0ï¼›è·å–å¯†ç å“ˆå¸Œç”¨äºæ¯”å¯¹ï¼›è·å– `role` ç”¨äºåŒºåˆ†ç”¨æˆ·ç±»å‹å’Œæƒé™ã€‚

-   **è§’è‰²ä¸æƒé™ç®¡ç† (Boss)**ï¼š**boss** å¯ä»¥ç®¡ç†è§’è‰² (`tb_role`)ã€æƒé™ (`tb_permission`) åŠå…¶å…³è” (`tb_role_permission`, `tb_admin_role`)ï¼Œå¹¶ä»»å‘½æˆ–è§£é™¤ **admin** (`tb_user`, `tb_admin`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_role`, `tb_permission`, `tb_role_permission`, `tb_user`, `tb_admin`, `tb_admin_role`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_role`: `id`, `name`, `description`, `status`, `create_time`, `update_time`
            -   `tb_permission`: `id`, `name`, `permission`, `description`, `create_time`, `update_time`
            -   `tb_role_permission`: `role_id`, `permission_id`
            -   `tb_user`: `id`, `role`, `update_time`
            -   `tb_admin`: `id`, `user_id`, `name`, `appointed_by`
            -   `tb_admin_role`: `admin_id`, `role_id`
    -   **æ¶‰åŠåŠŸèƒ½**: åˆ›å»ºã€ä¿®æ”¹ã€æŸ¥è¯¢è§’è‰²/æƒé™ï¼›åˆ›å»ºã€åˆ é™¤è§’è‰²ä¸æƒé™çš„å…³è”ï¼›æ›´æ–°ç”¨æˆ·è§’è‰²çŠ¶æ€ï¼›æ’å…¥ã€åˆ é™¤ç®¡ç†å‘˜è®°å½•ï¼›åˆ›å»ºã€åˆ é™¤ç®¡ç†å‘˜ä¸è§’è‰²çš„å…³è”ã€‚

#### æ™®é€šç”¨æˆ·åŠŸèƒ½

-   **èœå“/é£Ÿå ‚/çª—å£æ£€ç´¢ä¸æµè§ˆ**ï¼š**user** å¯ä»¥æŒ‰æ ¡åŒºã€é£Ÿå ‚ã€çª—å£ã€èœç³»ã€èœå“åç§°ç­‰æ¡ä»¶æ£€ç´¢ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_dish`, `tb_stall`, `tb_canteen`, `tb_campus`, `tb_canteen_type`, `tb_stall_type`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_dish`: `id`, `name`, `price`, `images`, `description`, `nutrition`, `score`, `category`, `status`, `stall_id`
            -   `tb_stall`: `id`, `name`, `images`, `introduction`, `score`, `location`, `open_hours`, `status`, `canteen_id`, `type_id`
            -   `tb_canteen`: `id`, `name`, `images`, `address`, `floor`, `open_hours`, `avg_price`, `introduction`, `score`, `status`, `campus_id`, `type_id`
            -   `tb_campus`: `id`, `name`, `address`
            -   `tb_canteen_type`: `id`, `name`
            -   `tb_stall_type`: `id`, `name`
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢èœå“ã€çª—å£ã€é£Ÿå ‚ã€æ ¡åŒºä¿¡æ¯ï¼›æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ¡ä»¶ï¼ˆåç§°ã€åˆ†ç±»ã€ç±»å‹ç­‰ï¼‰è¿›è¡Œç­›é€‰ï¼›è·å–è¯¦æƒ…å±•ç¤ºï¼›éœ€è¿‡æ»¤ `status` ä¸ºæœ‰æ•ˆçŠ¶æ€çš„è®°å½•ã€‚

-   **è¯„ä»·ä¸è¯„åˆ†**ï¼š**user** å¯ä»¥å¯¹é£Ÿå ‚ã€çª—å£æˆ–èœå“è¿›è¡Œæ–‡å­—/å›¾ç‰‡è¯„ä»·ï¼Œå¹¶ç»™å‡º1-5æ˜Ÿçš„å„é¡¹è¯„åˆ†ã€‚è¯„ä»·éœ€ **admin** å®¡æ ¸ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_file` (å¯é€‰), `tb_review`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_file`: `id`, `user_id`, `url`, `type`, `size`, `create_time`
            -   `tb_review`: `user_id`, `content`, `images`, `canteen_id`, `stall_id`, `dish_id`, `overall_score`, `taste_score`, `environment_score`, `service_score`, `price_score`, `status`, `create_time`, `update_time`
    -   **æ¶‰åŠåŠŸèƒ½**: (è‹¥æœ‰å›¾)æ’å…¥å›¾ç‰‡æ–‡ä»¶ä¿¡æ¯ï¼›æ’å…¥æ–°çš„è¯„ä»·è®°å½•ï¼Œå…³è”ç”¨æˆ·ã€è¯„ä»·å¯¹è±¡å’Œè¯„åˆ†ï¼Œ`status` åˆå§‹ä¸º 0 (å¾…å®¡æ ¸)ã€‚

-   **å‘è¡¨/ç®¡ç†åšå®¢ (ç¬”è®°)**ï¼š**user** å¯ä»¥å‘å¸ƒå›¾æ–‡å¹¶èŒ‚çš„ç¾é£Ÿåšå®¢/ç¬”è®°ï¼Œå…³è”é£Ÿå ‚/çª—å£/èœå“ï¼Œå¹¶å¯ä»¥ç¼–è¾‘æˆ–åˆ é™¤è‡ªå·±çš„åšå®¢ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_blog`, `tb_blog_dish` (å¯é€‰), `tb_blog_topic` (å¯é€‰), `tb_blog_tag` (å¯é€‰), `tb_file` (å¯é€‰)
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_blog`: `id`, `user_id`, `title`, `content`, `images`, `canteen_id`, `stall_id`, `status`, `liked`, `comments`, `create_time`, `update_time`
            -   `tb_blog_dish`: `blog_id`, `dish_id`, `is_recommended`
            -   `tb_blog_topic`: `blog_id`, `topic_id`
            -   `tb_blog_tag`: `blog_id`, `tag_id`
            -   `tb_file`: `id`, `user_id`, `url`, `type`, `size`
    -   **æ¶‰åŠåŠŸèƒ½**: (è‹¥æœ‰å›¾)æ’å…¥å›¾ç‰‡æ–‡ä»¶ä¿¡æ¯ï¼›æ’å…¥æ–°åšå®¢è®°å½•ï¼›æ›´æ–°è‡ªå·±çš„åšå®¢å†…å®¹/çŠ¶æ€ï¼›åˆ é™¤è‡ªå·±çš„åšå®¢ï¼›(å¯é€‰)æ’å…¥åšå®¢ä¸èœå“/è¯é¢˜/æ ‡ç­¾çš„å…³è”ã€‚

-   **å‘è¡¨/ç®¡ç†è¯„è®º**ï¼š**user** å¯ä»¥å¯¹åšå®¢æˆ–è¯„ä»·è¿›è¡Œè¯„è®ºï¼Œæˆ–å›å¤å…¶ä»–è¯„è®ºã€‚è¯„è®ºéœ€ **admin** å®¡æ ¸ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_comment`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `user_id`, `blog_id`, `review_id`, `parent_id`, `content`, `status`, `liked`, `create_time`
    -   **æ¶‰åŠåŠŸèƒ½**: æ’å…¥æ–°è¯„è®ºè®°å½• (`status`=0)ï¼›(å¯é€‰) æ›´æ–°æˆ–åˆ é™¤è‡ªå·±çš„è¯„è®ºã€‚

-   **ç‚¹èµ/å–æ¶ˆç‚¹èµ**ï¼š**user** å¯ä»¥å¯¹åšå®¢ã€è¯„ä»·ã€è¯„è®ºè¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_like`, `tb_blog`, `tb_review`, `tb_comment`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_like`: `user_id`, `liked_id`, `type`, `create_time`
            -   `tb_blog`/`tb_review`/`tb_comment`: `liked`
    -   **æ¶‰åŠåŠŸèƒ½**: æ’å…¥/åˆ é™¤ `tb_like` ä¸­çš„ç‚¹èµè®°å½•ï¼›(è®¡æ•°æ›´æ–°) æ›´æ–°è¢«ç‚¹èµå†…å®¹çš„ `liked` å­—æ®µã€‚

-   **æ”¶è—/å–æ¶ˆæ”¶è—**ï¼š**user** å¯ä»¥æ”¶è—åšå®¢ã€è¯„ä»·ã€é£Ÿå ‚ã€çª—å£ã€èœå“ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_favorite`
        -   **æ¶‰åŠå­—æ®µ**: `user_id`, `favorite_id`, `type`, `create_time`
        -   **æ¶‰åŠåŠŸèƒ½**: æ’å…¥æ”¶è—è®°å½•ï¼›æ ¹æ® `user_id`, `favorite_id`, `type` åˆ é™¤è®°å½•ã€‚

-   **å…³æ³¨/å–å…³ç”¨æˆ·**ï¼š**user** å¯ä»¥å…³æ³¨å…¶ä»–ç”¨æˆ·æˆ–å–æ¶ˆå…³æ³¨ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_follow`
        -   **æ¶‰åŠå­—æ®µ**: `user_id`, `follow_user_id`, `create_time`
    -   **æ¶‰åŠåŠŸèƒ½**: æ’å…¥å…³æ³¨è®°å½•ï¼›æ ¹æ® `user_id`, `follow_user_id` åˆ é™¤è®°å½•ã€‚

#### ç®¡ç†å‘˜åŠŸèƒ½ ğŸ›¡ï¸

-   **å†…å®¹å®¡æ ¸ (è¯„ä»·/è¯„è®º/åšå®¢)**ï¼š**admin** å®¡æ ¸ç”¨æˆ·æäº¤çš„è¯„ä»·ã€è¯„è®ºã€åšå®¢ï¼Œé€šè¿‡æˆ–æ‹’ç»ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_review`, `tb_comment`, `tb_blog`, `tb_admin`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_review`/`tb_comment`/`tb_blog`: `id`, `status`, `auditor_id`, `audit_time`, `audit_note` (for review), `update_time`
            -   `tb_admin`: `id`
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢ `status`=0 çš„å†…å®¹è®°å½•ï¼›æ›´æ–° `status` (ä¸º1æˆ–2), `auditor_id` (å½“å‰ admin çš„ ID), `audit_time` ç­‰ã€‚

-   **ç”¨æˆ·å†…å®¹ç®¡ç†**ï¼š**admin** å¯ä»¥éšè—æˆ–åˆ é™¤ä¸ç¬¦åˆè§„å®šçš„è¯„ä»·ã€è¯„è®ºã€åšå®¢ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_review`, `tb_comment`, `tb_blog`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `status`, `auditor_id` (å¯é€‰è®°å½•æ“ä½œè€…)
    -   **æ¶‰åŠåŠŸèƒ½**: æ›´æ–° `status` å­—æ®µä¸ºæ ‡è®°éšè—æˆ–åˆ é™¤çš„å€¼ã€‚

-   **åŸºç¡€æ•°æ®ç®¡ç† (é£Ÿå ‚/çª—å£/èœå“)**ï¼š**admin** ç®¡ç†æ ¡åŒº (`tb_campus`)ã€é£Ÿå ‚ç±»å‹ (`tb_canteen_type`)ã€é£Ÿå ‚ (`tb_canteen`)ã€çª—å£ç±»å‹ (`tb_stall_type`)ã€çª—å£ (`tb_stall`)ã€èœå“ (`tb_dish`) çš„ä¿¡æ¯ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_campus`, `tb_canteen_type`, `tb_canteen`, `tb_stall_type`, `tb_stall`, `tb_dish`
        -   **æ¶‰åŠå­—æ®µ**: å„è‡ªè¡¨ä¸­çš„æ‰€æœ‰å¯ç®¡ç†å­—æ®µã€‚
    -   **æ¶‰åŠåŠŸèƒ½**: å¯¹ä¸Šè¿°è¡¨æ‰§è¡Œ `INSERT`, `UPDATE` (åŒ…æ‹¬ `status` ç”¨äºé€»è¾‘åˆ é™¤æˆ–ä¸Šä¸‹æ¶), `DELETE` (æ…ç”¨), `SELECT`ã€‚

-   **è¯é¢˜ä¸æ ‡ç­¾ç®¡ç†**ï¼š**admin** åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æˆ–éšè—è¯é¢˜ (`tb_topic`) å’Œæ ‡ç­¾ (`tb_tag`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_topic`, `tb_tag`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_topic`: `id`, `name`, `description`, `cover`, `sort`, `status`
            -   `tb_tag`: `id`, `name`, `usage_count`
    -   **æ¶‰åŠåŠŸèƒ½**: å¯¹ `tb_topic` æ‰§è¡Œ `INSERT`, `UPDATE`, `DELETE` (æˆ–æ›´æ–° `status`), `SELECT`ï¼›å¯¹ `tb_tag` æ‰§è¡Œ `INSERT`, `UPDATE`, `DELETE`?, `SELECT`ã€‚

-   **å…¬å‘Šç®¡ç†**ï¼š**admin** å‘å¸ƒã€ç¼–è¾‘ã€ä¸‹çº¿ç³»ç»Ÿå…¬å‘Š (`tb_notice`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_notice`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `admin_id`, `title`, `content`, `type`, `status`, `start_time`, `end_time`, `create_time`, `update_time`
    -   **æ¶‰åŠåŠŸèƒ½**: `INSERT`, `UPDATE`, `SELECT`ã€‚

-   **ä¸¾æŠ¥å¤„ç†**ï¼š**admin** æŸ¥çœ‹ç”¨æˆ·ä¸¾æŠ¥ (`tb_report`) å¹¶è¿›è¡Œå¤„ç† (å¤„ç†/é©³å›)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_report`, `tb_admin`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `status`, `handle_admin_id`, `handle_note`, `update_time` (in `tb_report`); `id` (in `tb_admin`)
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢ `status`=0ï¼›æ›´æ–° `status`(1æˆ–2), `handle_admin_id`, `handle_note`ã€‚

-   **åé¦ˆå¤„ç†**ï¼š**admin** æŸ¥çœ‹ç”¨æˆ·åé¦ˆ (`tb_feedback`) å¹¶è¿›è¡Œå›å¤å’ŒçŠ¶æ€æ›´æ–°ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_feedback`, `tb_admin`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `status`, `response`, `admin_id`, `update_time` (in `tb_feedback`); `id` (in `tb_admin`)
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢ `status`=0ï¼›æ›´æ–° `status`(1), `response`, `admin_id`ã€‚

-   **è½®æ’­å›¾ä¸ç³»ç»Ÿå›¾ç‰‡ç®¡ç†**: **admin** ç®¡ç†é¦–é¡µè½®æ’­å›¾ (`tb_banner`) å’Œç³»ç»Ÿçº§å›¾ç‰‡ (`tb_image`, `tb_image_category`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_banner`, `tb_image_category`, `tb_image`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_banner`: `id`, `title`, `image`, `link`, `target_id`, `target_type`, `sort`, `status`, `start_time`, `end_time`
            -   `tb_image_category`: `id`, `name`, `description`, `sort`
            -   `tb_image`: `id`, `category_id`, `admin_id`, `name`, `url`, `width`, `height`, `size`, `status`
    -   **æ¶‰åŠåŠŸèƒ½**: å¯¹ä¸Šè¿°è¡¨æ‰§è¡Œ `INSERT`, `UPDATE`, `DELETE` (æˆ–æ›´æ–° `status`), `SELECT`ã€‚

#### Boss ä¸“å±åŠŸèƒ½ ğŸ‘‘

-   **ç®¡ç†å‘˜è´¦å·ä¸è§’è‰²ç®¡ç†**ï¼š**boss** ä»»å‘½/è§£é™¤ **admin**ï¼Œç®¡ç†è§’è‰² (`tb_role`)ã€æƒé™ (`tb_permission`) åŠåˆ†é… (`tb_admin_role`, `tb_role_permission`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹: (åŒè´¦å·ç®¡ç†ä¸­çš„ â€œè§’è‰²ä¸æƒé™ç®¡ç† (Boss)â€ éƒ¨åˆ†)ã€‚

-   **ç³»ç»Ÿé…ç½®ç®¡ç†**ï¼š**boss** ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒé…ç½®å‚æ•° (`tb_config`) å’Œæ•æ„Ÿè¯åº“ (`tb_sensitive_word`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_config`, `tb_sensitive_word`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_config`: `id`, `key`, `value`, `description`
            -   `tb_sensitive_word`: `id`, `word`, `type`, `replace_word`
    -   **æ¶‰åŠåŠŸèƒ½**: å¯¹ä¸Šè¿°è¡¨æ‰§è¡Œ `INSERT`, `UPDATE`, `DELETE` (æ…ç”¨), `SELECT`ã€‚

-   **ç»Ÿè®¡ä¸åˆ†ææŸ¥çœ‹**ï¼š**boss** æŸ¥çœ‹ç³»ç»Ÿå„ç±»ç»Ÿè®¡æŠ¥è¡¨ (`tb_statistics`)ã€æ’è¡Œæ¦œ (`tb_ranking`) å’Œæ—¥å¿— (`tb_log`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_statistics`, `tb_ranking`, `tb_log`
        -   **æ¶‰åŠå­—æ®µ**: å„è¡¨æ‰€æœ‰å­—æ®µã€‚
    -   **æ¶‰åŠåŠŸèƒ½**: `SELECT` æŸ¥è¯¢ï¼ŒæŒ‰éœ€ç­›é€‰å’Œèšåˆã€‚

-   **ç‰ˆæœ¬ç®¡ç†**ï¼š**boss** ç®¡ç† App æˆ– Web ç«¯çš„ç‰ˆæœ¬ä¿¡æ¯ (`tb_version`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_version`
        -   **æ¶‰åŠå­—æ®µ**: `id`, `version`, `platform`, `description`, `download_url`, `is_force`, `status`
    -   **æ¶‰åŠåŠŸèƒ½**: `INSERT`, `UPDATE`, `SELECT`ã€‚

-   **æ´»åŠ¨/ä¼˜æƒ åˆ¸/å‹‹ç« /ç­‰çº§è§„åˆ™ç®¡ç†**ï¼š**boss** å®šä¹‰å’Œç®¡ç†æ´»åŠ¨ (`tb_activity`)ã€ä¼˜æƒ åˆ¸ (`tb_voucher`)ã€å‹‹ç«  (`tb_medal`)ã€ç”¨æˆ·ç­‰çº§è§„åˆ™ (`tb_level_rule`)ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_activity`, `tb_voucher`, `tb_medal`, `tb_level_rule`
        -   **æ¶‰åŠå­—æ®µ**: å„è¡¨ä¸­æ‰€æœ‰å¯ç®¡ç†å­—æ®µã€‚
    -   **æ¶‰åŠåŠŸèƒ½**: å¯¹ä¸Šè¿°è¡¨æ‰§è¡Œ `INSERT`, `UPDATE`, `DELETE` (æˆ–æ›´æ–° `status`), `SELECT`ã€‚

### Bçº§åŠŸèƒ½ï¼ˆå»ºè®®å®ç°ï¼‰

#### ç”¨æˆ·äº¤äº’ä¼˜åŒ– âœ¨

-   **éªŒè¯ç ç™»å½•/æ‰¾å›å¯†ç **ï¼šæä¾›çŸ­ä¿¡æˆ–é‚®ç®±éªŒè¯ç ç”¨äºç™»å½•æˆ–æ‰¾å›å¯†ç ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_verification`, `tb_user`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_verification`: `id`, `phone`/`email`, `code`, `type`, `expire_time`, `status`, `create_time`
            -   `tb_user`: `id`, `password`, `email`, `phone`
    -   **æ¶‰åŠåŠŸèƒ½**: æ’å…¥éªŒè¯ç è®°å½• (`type`=1æˆ–2)ï¼›æŸ¥è¯¢éªŒè¯ç æœ‰æ•ˆæ€§ï¼›æ›´æ–° `status`ï¼›(æ‰¾å›å¯†ç æ—¶) æ›´æ–° `tb_user` çš„ `password`ã€‚

-   **åˆ†äº«ä¸è½¬å‘**ï¼š**user** å¯ä»¥ç”Ÿæˆç‚¹è¯„/åšå®¢å¡ç‰‡å¹¶åˆ†äº«ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_log` (å¯é€‰)
        -   **æ¶‰åŠå­—æ®µ**: `user_id`, `operation`, `source_id`, `create_time`
    -   **æ¶‰åŠåŠŸèƒ½**: è®°å½•åˆ†äº«è¡Œä¸ºã€‚

-   **ç”¨æˆ·ç¤¾åŒºåŠŸèƒ½ (å…³æ³¨/ç§ä¿¡)**ï¼š
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹: (åŒ A çº§åŠŸèƒ½ä¸­çš„ç›¸åº”éƒ¨åˆ†)ã€‚

#### ç”¨æˆ·æ¿€åŠ±æœºåˆ¶ ğŸ†

-   **ç§¯åˆ†ç³»ç»Ÿ (è·å–ä¸å…‘æ¢)**ï¼š
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_user`, `tb_credit_record`, `tb_user_voucher`, `tb_voucher`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_user`: `id`, `credits`
            -   `tb_credit_record`: `user_id`, `type`, `credits`, `description`, `create_time`
            -   `tb_user_voucher`: `user_id`, `voucher_id`, `status`, `create_time`
            -   `tb_voucher`: `id`, `stock`, `required_credits`, `update_time`
    -   **æ¶‰åŠåŠŸèƒ½**: æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼›è®°å½•ç§¯åˆ†å˜åŠ¨ï¼›æ’å…¥ç”¨æˆ·ä¼˜æƒ åˆ¸å…³è”ï¼›æ›´æ–°ä¼˜æƒ åˆ¸åº“å­˜ã€‚

-   **å‹‹ç« ç³»ç»Ÿ (æˆäºˆä¸å±•ç¤º)**ï¼š
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_medal`, `tb_review`, `tb_blog`, `tb_like`, `tb_user_medal`ç­‰ (æ ¹æ®æ¡ä»¶å†³å®š)
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_medal`: `id`, `condition`
            -   è¡Œä¸ºè¡¨: ç›¸å…³è®¡æ•°æˆ–çŠ¶æ€å­—æ®µã€‚
            -   `tb_user_medal`: `user_id`, `medal_id`, `obtain_time`, `is_display`
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢è·å¾—æ¡ä»¶ï¼›æŸ¥è¯¢ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼›æ£€æŸ¥/æ’å…¥ç”¨æˆ·å‹‹ç« è®°å½•ï¼›æŸ¥è¯¢ç”¨æˆ·æ‹¥æœ‰çš„å‹‹ç« ã€‚

-   **ç§¯åˆ†æ’è¡Œæ¦œå±•ç¤º**ï¼š
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_ranking`, `tb_user`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_ranking`: `target_id`, `score`, `rank`, `type`
            -   `tb_user`: `id`, `nickname`, `icon`, `credits`, `level`
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢é¢„è®¡ç®—çš„ç§¯åˆ†æ¦œ (`type`=3) æˆ–å®æ—¶æŸ¥è¯¢ `tb_user` å¹¶æŒ‰ `credits` æ’åºã€‚

-   **æ¯æ—¥ç­¾åˆ°**ï¼š**user** å¯ä»¥æ¯æ—¥ç­¾åˆ°è·å–ç§¯åˆ†ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_sign`, `tb_user`, `tb_credit_record`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_sign`: `user_id`, `date`, `year`, `month`, `create_time`
            -   `tb_user`: `id`, `credits`
            -   `tb_credit_record`: `user_id`, `type`, `credits`, `description`, `create_time`
    -   **æ¶‰åŠåŠŸèƒ½**: æ£€æŸ¥å½“æ—¥æ˜¯å¦å·²ç­¾åˆ°ï¼›æ’å…¥ç­¾åˆ°è®°å½•ï¼›æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼›æ’å…¥ç§¯åˆ†è®°å½•ã€‚

### Cçº§åŠŸèƒ½ï¼ˆå¯é€‰å®ç°ï¼‰

#### æ•°æ®ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ– âš¡

-   **Redisç¼“å­˜**: ç¼“å­˜çƒ­ç‚¹æ•°æ®ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_dish`, `tb_review`, `tb_blog`, `tb_canteen` ç­‰ (ä½œä¸ºæ•°æ®æº)
        -   **æ¶‰åŠå­—æ®µ**: éœ€è¦ç¼“å­˜çš„æ ¸å¿ƒå±•ç¤ºå­—æ®µã€‚
    -   **æ¶‰åŠåŠŸèƒ½**: `SELECT` æŸ¥è¯¢å¡«å……ç¼“å­˜ï¼›ç¼“å­˜æ›´æ–°/å¤±æ•ˆé€»è¾‘ã€‚

-   **é«˜å¹¶å‘å¤„ç†**: ä¼˜åŒ–æ•°æ®åº“å’Œåº”ç”¨ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: æ‰€æœ‰è¡¨ã€‚
        -   **æ¶‰åŠå­—æ®µ**: é«˜é¢‘æŸ¥è¯¢/æ›´æ–°çš„å­—æ®µã€‚
    -   **æ¶‰åŠåŠŸèƒ½**: ç´¢å¼•ä¼˜åŒ–ï¼›å¹¶å‘æ§åˆ¶ç­–ç•¥ï¼›å¼‚æ­¥å¤„ç†ã€‚

#### ä¸ªæ€§åŒ–æ¨è ğŸ¯

-   **ä¸ªæ€§åŒ–æ¨è**: æ ¹æ®ç”¨æˆ·è¡Œä¸ºå’Œåå¥½æ¨èèœå“ã€‚
    -   **æ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µ** ğŸ“‹:
        -   **æ¶‰åŠè¡¨**: `tb_user_preference`, `tb_review`, `tb_favorite`, `tb_search_history`, `tb_log`, `tb_dish`
        -   **æ¶‰åŠå­—æ®µ**:
            -   `tb_user_preference`: `user_id`, `preference_type`, `preference_value`, `weight`
            -   `tb_review`: `user_id`, `dish_id`, `overall_score`
            -   `tb_favorite`: `user_id`, `favorite_id`, `type`
            -   `tb_search_history`: `user_id`, `keyword`
            -   `tb_log`: `user_id`, `operation`, `target_id`, `type`
            -   `tb_dish`: `id`, `name`, `images`, `price`, `score`, `category` ç­‰
    -   **æ¶‰åŠåŠŸèƒ½**: æŸ¥è¯¢ç”¨æˆ·å„ç±»è¡Œä¸ºæ•°æ®åŠåå¥½ï¼›æ ¹æ®æ¨èç®—æ³•ç»“æœæŸ¥è¯¢ `tb_dish` è·å–æ¨èåˆ—è¡¨ã€‚

#### AIä¸æœ¬åœ°çŸ¥è¯†åº“éƒ¨ç½² ğŸ¤–

-   **ç»“åˆæœ¬åœ°æ•°æ®ä¼˜åŒ–ç³»ç»Ÿæ™ºèƒ½åŠŸèƒ½** (ä¾‹å¦‚ï¼šåŸºäºèœå“æè¿°å’Œè¯„è®ºçš„æ™ºèƒ½é—®ç­”)ã€‚
    -   **å®ç°è¿‡ç¨‹æ¦‚è¿°**:
        æ­¤åŠŸèƒ½æ—¨åœ¨åˆ©ç”¨ AI å¤§è¯­è¨€æ¨¡å‹ (LLM) ç»“åˆç³»ç»Ÿå†…çš„èœå“ã€è¯„ä»·ç­‰æ•°æ®ï¼Œæä¾›æ™ºèƒ½é—®ç­”æˆ–å†…å®¹ç”ŸæˆæœåŠ¡ã€‚å‡è®¾åœ¨èœå“è¯¦æƒ…é¡µæˆ–è¯„ä»·è¯¦æƒ…é¡µä¸‹æ–¹å¢åŠ ä¸€ä¸ªâ€œä¸ AI å¯¹è¯â€çš„æ¨¡å—ã€‚
    -   **æŠ€æœ¯é€‰å‹**:
        -   **å‰ç«¯**: Vue.js (å¦‚ Vue 3 + Pinia/Vuex + Axios)
        -   **åç«¯**: Spring Boot (Web + Data JPA + Lombok + ...)
        -   **AI æœåŠ¡**: å¤–éƒ¨ LLM API (é€‰æ‹© Kimi, DeepSeek, OpenAI GPT, Google Gemini ç­‰ä¹‹ä¸€ï¼Œè·å– API Key)
        -   **HTTP Client (åç«¯)**: Spring `RestTemplate` æˆ– `WebClient`
    -   **å‰ç«¯å®ç° (Vue - ç¤ºä¾‹)**:
        **`AIChatBox.vue` ç»„ä»¶**
        ```vue
        <template>
          <div class="ai-chat-box">
            <h3>ä¸ AI åŠ©æ‰‹å¯¹è¯</h3>
            <div class="messages" ref="messageContainer">
              <div v-for="(msg, index) in messages" :key="index" :class="['message', msg.role]">
                {{ msg.content }}
              </div>
              <div v-if="isLoading" class="message assistant">æ­£åœ¨æ€è€ƒä¸­...</div>
            </div>
            <div class="input-area">
              <textarea v-model="userInput" placeholder="è¾“å…¥ä½ å…³äºè¿™ä¸ªèœå“çš„é—®é¢˜..." @keyup.enter="sendMessage"></textarea>
              <button @click="sendMessage" :disabled="isLoading || !userInput.trim()">å‘é€</button>
            </div>
          </div>
        </template>
        
        <script setup>
        import { ref, nextTick, watch } from 'vue';
        import axios from 'axios'; // å‡è®¾å·²å®‰è£…å¹¶é…ç½® Axios
        
        // å‡è®¾é€šè¿‡ props ä¼ å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯
        const props = defineProps({
          contextType: { type: String, required: true }, // 'dish' or 'review'
          contextId: { type: [String, Number], required: true }
        });
        
        const messages = ref([]); // å¯¹è¯å†å² { role: 'user' | 'assistant', content: '...' }
        const userInput = ref('');
        const isLoading = ref(false);
        const messageContainer = ref(null);
        
        // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
        watch(messages, async () => {
          await nextTick();
          if (messageContainer.value) {
            messageContainer.value.scrollTop = messageContainer.value.scrollHeight;
          }
        }, { deep: true });
        
        async function sendMessage() {
          const question = userInput.value.trim();
          if (!question || isLoading.value) return;
        
          // 1. å°†ç”¨æˆ·æ¶ˆæ¯æ·»åŠ åˆ°å†å²è®°å½•
          messages.value.push({ role: 'user', content: question });
          userInput.value = '';
          isLoading.value = true;
        
          try {
            // 2. è°ƒç”¨åç«¯ API
            const response = await axios.post('/api/ai/chat', {
              userQuestion: question,
              contextType: props.contextType,
              contextId: props.contextId
            });
        
            // 3. å°† AI å›ç­”æ·»åŠ åˆ°å†å²è®°å½•
            if (response.data && response.data.aiResponse) {
              messages.value.push({ role: 'assistant', content: response.data.aiResponse });
            } else {
              messages.value.push({ role: 'assistant', content: 'æŠ±æ­‰ï¼Œæš‚æ—¶æ— æ³•å›ç­”ã€‚' });
            }
          } catch (error) {
            console.error("AI Chat Error:", error);
            messages.value.push({ role: 'assistant', content: 'æŠ±æ­‰ï¼Œä¸AIåŠ©æ‰‹é€šä¿¡æ—¶å‘ç”Ÿé”™è¯¯ã€‚' });
          } finally {
            isLoading.value = false;
          }
        }
        </script>
        
        <style scoped>
        .ai-chat-box { /* ... æ ·å¼ ... */ }
        .messages { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
        .message { margin-bottom: 8px; padding: 5px 10px; border-radius: 5px; }
        .user { background-color: #e1f5fe; text-align: right; }
        .assistant { background-color: #f1f1f1; }
        .input-area { display: flex; }
        textarea { flex-grow: 1; margin-right: 5px; }
        </style>
        ```
    -   **åç«¯å®ç° (Spring Boot - ç¤ºä¾‹)**:
        **DTOs**
        ```java
        // ChatRequestDto.java
        import lombok.Data;
        @Data
        public class ChatRequestDto {
            private String userQuestion;
            private String contextType; // e.g., "dish"
            private Long contextId;   // e.g., dish ID
        }
        
        // ChatResponseDto.java
        import lombok.AllArgsConstructor;
        import lombok.Data;
        @Data
        @AllArgsConstructor
        public class ChatResponseDto {
            private String aiResponse;
        }
        
        // --- LLM API Specific DTOs (Example for a generic chat API) ---
        import lombok.Data;
        import lombok.AllArgsConstructor;
        import java.util.List;
        
        @Data
        public class LlmApiRequest {
            private String model;
            private List<Message> messages;
            private Double temperature;
            private Integer max_tokens;
        }
        
        @Data
        @AllArgsConstructor
        public class Message {
            private String role; // "system", "user", "assistant"
            private String content;
        }
        
        @Data
        public class LlmApiResponse {
            private List<Choice> choices;
            // ... other fields like usage, id etc.
        }
        
        @Data
        public class Choice {
            private Message message;
            // ... other fields like index, finish_reason etc.
        }
        ```
        **Controller (`AiController.java`)**
        ```java
        import org.springframework.web.bind.annotation.*;
        import org.springframework.beans.factory.annotation.Autowired;
        import org.springframework.http.ResponseEntity;
        
        @RestController
        @RequestMapping("/api/ai")
        public class AiController {
        
            @Autowired
            private AiService aiService;
        
            @PostMapping("/chat")
            public ResponseEntity<ChatResponseDto> getChatResponse(@RequestBody ChatRequestDto request) {
                try {
                    String response = aiService.getAiResponse(request);
                    return ResponseEntity.ok(new ChatResponseDto(response));
                } catch (Exception e) {
                    // Log the error
                    return ResponseEntity.internalServerError().body(new ChatResponseDto("å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ã€‚"));
                }
            }
        }
        ```
        **Service (`AiService.java`)**
        ```java
        import org.springframework.stereotype.Service;
        import org.springframework.beans.factory.annotation.Autowired;
        import java.util.Optional;
        import java.util.stream.Collectors;
        import java.util.List;
        
        @Service
        public class AiService {
        
            @Autowired
            private DishRepository dishRepository; // Assuming JPA Repository
            @Autowired
            private ReviewRepository reviewRepository; // Assuming JPA Repository
            @Autowired
            private AiApiClient aiApiClient;
        
            public String getAiResponse(ChatRequestDto request) {
                String context = buildContext(request.getContextType(), request.getContextId());
                if (context.isEmpty()) {
                    return "æŠ±æ­‰ï¼Œæ— æ³•æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚";
                }
                return aiApiClient.callLLMApi(context, request.getUserQuestion());
            }
        
            private String buildContext(String contextType, Long contextId) {
                StringBuilder contextBuilder = new StringBuilder();
                if ("dish".equalsIgnoreCase(contextType)) {
                    Optional<Dish> dishOpt = dishRepository.findById(contextId);
                    if (dishOpt.isPresent()) {
                        Dish dish = dishOpt.get();
                        contextBuilder.append("èœå“åç§°: ").append(dish.getName()).append("\n");
                        contextBuilder.append("åˆ†ç±»: ").append(dish.getCategory()).append("\n");
                        contextBuilder.append("ä»·æ ¼: ").append(dish.getPrice()).append("å…ƒ\n");
                        if (dish.getDescription() != null && !dish.getDescription().isEmpty()) {
                           contextBuilder.append("æè¿°: ").append(dish.getDescription()).append("\n");
                        }
                        // Optionally add recent reviews
                        List<Review> reviews = reviewRepository.findTop5ByDishIdAndStatusOrderByCreateTimeDesc(contextId, 1); // status=1 approved
                        if (!reviews.isEmpty()) {
                             contextBuilder.append("éƒ¨åˆ†è¯„ä»·:\n");
                             reviews.forEach(r -> contextBuilder.append("- ").append(r.getContent()).append("\n"));
                        }
                    }
                }
                // Add cases for "review" context type etc.
                return contextBuilder.toString();
            }
        }
        ```
        **Repository Interfaces (Example)**
        ```java
        import org.springframework.data.jpa.repository.JpaRepository;
        import java.util.List;
        
        public interface DishRepository extends JpaRepository<Dish, Long> { }
        
        public interface ReviewRepository extends JpaRepository<Review, Long> {
             // Find top 5 approved reviews for a dish, ordered by creation time descending
             List<Review> findTop5ByDishIdAndStatusOrderByCreateTimeDesc(Long dishId, Integer status);
        }
        // Define entity classes Dish, Review etc. corresponding to your tables
        ```
        **API Client (`AiApiClient.java`)**
        ```java
        import org.springframework.stereotype.Component;
        import org.springframework.web.client.RestTemplate;
        import org.springframework.beans.factory.annotation.Value;
        import org.springframework.http.*;
        import java.util.ArrayList;
        import java.util.List;
        
        @Component
        public class AiApiClient {
        
            @Value("${llm.api.url}") // e.g., [https://api.deepseek.com/v1/chat/completions](https://api.deepseek.com/v1/chat/completions)
            private String apiUrl;
        
            @Value("${llm.api.key}") // Store securely, e.g., environment variable or secrets manager
            private String apiKey;
        
            @Value("${llm.model.name}") // e.g., deepseek-chat
            private String modelName;
        
            private final RestTemplate restTemplate = new RestTemplate();
        
            public String callLLMApi(String context, String userQuestion) {
                HttpHeaders headers = new HttpHeaders();
                headers.setContentType(MediaType.APPLICATION_JSON);
                headers.setBearerAuth(apiKey);
        
                List<Message> messages = new ArrayList<>();
                messages.add(new Message("system", "ä½ æ˜¯ä¸€ä¸ªå…³äºå¤©æ´¥å¤§å­¦é£Ÿå ‚ç¾é£Ÿçš„æ™ºèƒ½åŠ©æ‰‹ã€‚è¯·æ ¹æ®æä¾›çš„èƒŒæ™¯ä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚èƒŒæ™¯ä¿¡æ¯å¦‚ä¸‹ï¼š\n" + context));
                messages.add(new Message("user", userQuestion));
        
                LlmApiRequest requestPayload = new LlmApiRequest();
                requestPayload.setModel(modelName);
                requestPayload.setMessages(messages);
                requestPayload.setTemperature(0.7);
                requestPayload.setMax_tokens(200); // Limit response length
        
                HttpEntity<LlmApiRequest> entity = new HttpEntity<>(requestPayload, headers);
        
                try {
                    ResponseEntity<LlmApiResponse> response = restTemplate.postForEntity(apiUrl, entity, LlmApiResponse.class);
        
                    if (response.getStatusCode() == HttpStatus.OK && response.getBody() != null &&
                        response.getBody().getChoices() != null && !response.getBody().getChoices().isEmpty()) {
                        // Return the content of the first choice's message
                        return response.getBody().getChoices().get(0).getMessage().getContent();
                    } else {
                        // Log error details from response if available
                        System.err.println("LLM API call failed with status: " + response.getStatusCode());
                        return "æŠ±æ­‰ï¼ŒAIåŠ©æ‰‹æš‚æ—¶æ— æ³•å“åº”ã€‚";
                    }
                } catch (Exception e) {
                    System.err.println("Error calling LLM API: " + e.getMessage());
                    return "æŠ±æ­‰ï¼Œè¿æ¥AIåŠ©æ‰‹æ—¶å‘ç”Ÿé”™è¯¯ã€‚";
                }
            }
        }
        ```
    -   **æ³¨æ„äº‹é¡¹**:
        -   **API Key å®‰å…¨**: `llm.api.key` ç»ä¸èƒ½ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼Œåº”ä½¿ç”¨ Spring Boot çš„é…ç½®ç®¡ç†ï¼ˆå¦‚ `application.properties` æˆ–ç¯å¢ƒå˜é‡ï¼‰å¹¶å®‰å…¨å­˜å‚¨ã€‚
        -   **é”™è¯¯å¤„ç†**: ä¸Šè¿°ä»£ç ä»…åŒ…å«åŸºæœ¬é”™è¯¯å¤„ç†ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´å¥å£®çš„é”™è¯¯æ•è·å’Œæ—¥å¿—è®°å½•ã€‚
        -   **ä¸Šä¸‹æ–‡é•¿åº¦**: éœ€è¦æ³¨æ„ä¼ é€’ç»™ LLM API çš„ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ã€‚å¦‚æœè¯„è®ºè¿‡å¤šï¼Œéœ€è¦æˆªæ–­æˆ–è¿›è¡Œæ‘˜è¦ã€‚
        -   **æˆæœ¬**: LLM API è°ƒç”¨é€šå¸¸æŒ‰ token è®¡è´¹ï¼Œéœ€ç›‘æ§ä½¿ç”¨é‡ã€‚
        -   **æ¨¡å‹é€‰æ‹©**: `modelName` éœ€è¦æ›¿æ¢ä¸ºæ‚¨é€‰æ‹©ä½¿ç”¨çš„å…·ä½“ AI æ¨¡å‹æ ‡è¯†ã€‚